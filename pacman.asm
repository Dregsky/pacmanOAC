.eqv VGA_BASE 0xFF000000
.eqv X 320 # 320 - 10
.eqv Y 240 # 240 - 10
.eqv Xmap 32
.eqv Ymap 24

.data
	map_vetor: .byte 0x00,0x99,0x99,0x99,0x99,0x99,0x99,0x99,0x99,0x99,0x99,0x99,0x99,0x99,0x99,0x99,0x99,0x99,0x99,0x99,0x99,0x99,0x99,0x99,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x99,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0x99,0x99,0xFF,0x99,0x99,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0x99,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x99,0xFF,0x99,0x99,0xFF,0x99,0x99,0x99,0xFF,0x99,0x99,0xFF,0x99,0x99,0xFF,0x99,0x99,0x99,0xFF,0x99,0x99,0xFF,0x99,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x99,0xFA,0x99,0x99,0xFF,0x99,0x99,0x99,0xFF,0x99,0x99,0xFF,0x99,0x99,0xFF,0x99,0x99,0x99,0xFF,0x99,0x99,0xFA,0x99,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x99,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0x99,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x99,0xFF,0x99,0x99,0xFF,0x99,0xFF,0x99,0x99,0x99,0x99,0x99,0x99,0x99,0x99,0x99,0xFF,0x99,0xFF,0x99,0x99,0xFF,0x99,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x99,0xFF,0xFF,0xFF,0xFF,0x99,0xFF,0xFF,0xFF,0x99,0x99,0x99,0x99,0x99,0xFF,0xFF,0xFF,0x99,0xFF,0xFF,0xFF,0xFF,0x99,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x99,0x99,0x99,0x99,0xFF,0x99,0x99,0x99,0x00,0x99,0x99,0x99,0x99,0x99,0x00,0x99,0x99,0x99,0xFF,0x99,0x99,0x99,0x99,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x99,0xFF,0x99,0x99,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x99,0x99,0xFF,0x99,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x99,0xFF,0x99,0x99,0x00,0x99,0x99,0xAD,0xAD,0xAD,0x99,0x99,0x00,0x99,0x99,0xFF,0x99,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x99,0xFF,0x99,0x99,0x00,0x99,0x99,0x00,0x00,0x00,0x99,0x99,0x00,0x99,0x99,0xFF,0x99,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x99,0xFF,0x00,0x00,0x00,0x99,0x99,0x99,0x99,0x99,0x99,0x99,0x00,0x00,0x00,0xFF,0x99,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x99,0xFF,0x99,0x99,0x00,0x99,0x99,0x99,0x99,0x99,0x99,0x99,0x00,0x99,0x99,0xFF,0x99,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x99,0xFF,0x99,0x99,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0x99,0x99,0xFF,0x99,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x99,0x99,0x99,0x99,0xFF,0x99,0x99,0xFF,0x99,0x99,0x99,0xFF,0x99,0x99,0x99,0xFF,0x99,0x99,0xFF,0x99,0x99,0x99,0x99,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x99,0xFA,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0x99,0x99,0xFF,0x99,0x99,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFA,0x99,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x99,0xFF,0x99,0x99,0xFF,0x99,0x99,0x99,0xFF,0x99,0x99,0xFF,0x99,0x99,0xFF,0x99,0x99,0x99,0xFF,0x99,0x99,0xFF,0x99,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x99,0xFF,0xFF,0x99,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0x99,0xFF,0xFF,0x99,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x99,0x99,0xFF,0x99,0xFF,0x99,0xFF,0x99,0x99,0x99,0x99,0xFF,0x99,0x99,0x99,0x99,0xFF,0x99,0xFF,0x99,0xFF,0x99,0x99,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x99,0x99,0xFF,0x99,0xFF,0x99,0xFF,0x99,0x99,0x99,0x99,0xFF,0x99,0x99,0x99,0x99,0xFF,0x99,0xFF,0x99,0xFF,0x99,0x99,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x99,0xFF,0xFF,0xFF,0xFF,0x99,0xFF,0xFF,0xFF,0x99,0x99,0xFF,0x99,0x99,0xFF,0xFF,0xFF,0x99,0xFF,0xFF,0xFF,0xFF,0x99,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x99,0xFF,0x99,0x99,0x99,0x99,0x99,0x99,0xFF,0x99,0x99,0xFF,0x99,0x99,0xFF,0x99,0x99,0x99,0x99,0x99,0x99,0xFF,0x99,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x99,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0x99,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x99,0x99,0x99,0x99,0x99,0x99,0x99,0x99,0x99,0x99,0x99,0x99,0x99,0x99,0x99,0x99,0x99,0x99,0x99,0x99,0x99,0x99,0x99,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
	#
	tile_comida: .byte 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xFF,0xFF,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xFF,0xFF,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
	tile_comidona: .byte 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xFF,0xFF,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xFF,0xFF,0xFF,0xFF,0x00,0x00,0x00,0x00,0x00,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0x00,0x00,0x00,0x00,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0x00,0x00,0x00,0x00,0x00,0xFF,0xFF,0xFF,0xFF,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xFF,0xFF,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
	tile_porta_fantasma: .byte 0xAD,0xAD,0xAD,0xAD,0xAD,0xAD,0xAD,0xAD,0xAD,0xAD,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
	#	
	pac_man_yellow_open_right: .byte 0x0,0x0,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x0,0x0,0x0,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x0,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x0,0x0,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x0,0x0,0x0,0x0,0x3F,0x3F,0x3F,0x3F,0x3F,0x0,0x0,0x0,0x0,0x0,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x0,0x0,0x0,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x0,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x0,0x0,0x0,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x0,0x0
	pac_man_yellow_open_left: .byte 0x0,0x0,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x0,0x0,0x0,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x0,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x0,0x0,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x0,0x0,0x0,0x0,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x0,0x0,0x0,0x0,0x0,0x3F,0x3F,0x3F,0x3F,0x3F,0x0,0x0,0x0,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x0,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x0,0x0,0x0,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x0,0x0
	pac_man_yellow_open_down: .byte 0x0,0x0,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x0,0x0,0x0,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x0,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x0,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x0,0x0,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x0,0x0,0x0,0x3F,0x3F,0x3F,0x0,0x3F,0x3F,0x0,0x0,0x0,0x0,0x3F,0x3F,0x0,0x0,0x0,0x3F,0x0,0x0,0x0,0x0,0x3F,0x0,0x0
	pac_man_yellow_open_top: .byte 0x0,0x0,0x3F,0x0,0x0,0x0,0x0,0x3F,0x0,0x0,0x0,0x3F,0x3F,0x0,0x0,0x0,0x0,0x3F,0x3F,0x0,0x3F,0x3F,0x3F,0x3F,0x0,0x0,0x0,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x0,0x0,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x0,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x0,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x0,0x0,0x0,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x0,0x0
	pac_man_yellow_close: .byte 0x0,0x0,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x0,0x0,0x0,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x0,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x0,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x0,0x0,0x0,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x0,0x0
	#
	pac_man_red_open_right: .byte 0x0,0x0,0x07,0x07,0x07,0x07,0x07,0x07,0x0,0x0,0x0,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x0,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x0,0x0,0x07,0x07,0x07,0x07,0x07,0x07,0x0,0x0,0x0,0x0,0x07,0x07,0x07,0x07,0x07,0x0,0x0,0x0,0x0,0x0,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x0,0x0,0x0,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x0,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x0,0x0,0x0,0x07,0x07,0x07,0x07,0x07,0x07,0x0,0x0
	pac_man_red_open_left: .byte 0x0,0x0,0x07,0x07,0x07,0x07,0x07,0x07,0x0,0x0,0x0,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x0,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x0,0x0,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x0,0x0,0x0,0x0,0x07,0x07,0x07,0x07,0x07,0x07,0x0,0x0,0x0,0x0,0x0,0x07,0x07,0x07,0x07,0x07,0x0,0x0,0x0,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x0,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x0,0x0,0x0,0x07,0x07,0x07,0x07,0x07,0x07,0x0,0x0
	pac_man_red_open_down: .byte 0x0,0x0,0x07,0x07,0x07,0x07,0x07,0x07,0x0,0x0,0x0,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x0,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x0,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x0,0x0,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x0,0x0,0x0,0x07,0x07,0x07,0x0,0x07,0x07,0x0,0x0,0x0,0x0,0x07,0x07,0x0,0x0,0x0,0x07,0x0,0x0,0x0,0x0,0x07,0x0,0x0
	pac_man_red_open_top: .byte 0x0,0x0,0x07,0x0,0x0,0x0,0x0,0x07,0x0,0x0,0x0,0x07,0x07,0x0,0x0,0x0,0x0,0x07,0x07,0x0,0x07,0x07,0x07,0x07,0x0,0x0,0x0,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x0,0x0,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x0,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x0,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x0,0x0,0x0,0x07,0x07,0x07,0x07,0x07,0x07,0x0,0x0
	pac_man_red_close: .byte 0x0,0x0,0x07,0x07,0x07,0x07,0x07,0x07,0x0,0x0,0x0,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x0,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x0,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x0,0x0,0x0,0x07,0x07,0x07,0x07,0x07,0x07,0x0,0x0
	#
	ghost_green: .byte 0x0,0x0,0x2A,0x2A,0x2A,0x2A,0x2A,0x2A,0x0,0x0,0x0,0x2A,0x2A,0x2A,0x2A,0x2A,0x2A,0x2A,0x2A,0x0,0x2A,0x2A,0xFF,0x2A,0x2A,0x2A,0x2A,0xFF,0x2A,0x2A,0x2A,0xFF,0x0,0xFF,0x2A,0x2A,0xFF,0x0,0xFF,0x2A,0x2A,0xFF,0xFF,0x2A,0x2A,0x2A,0x2A,0xFF,0xFF,0x2A,0x2A,0x2A,0x2A,0x2A,0x2A,0x2A,0x2A,0x2A,0x2A,0x2A,0x2A,0x2A,0x2A,0x2A,0x2A,0x2A,0x2A,0x2A,0x2A,0x2A,0x2A,0x2A,0x2A,0x2A,0x2A,0x2A,0x2A,0x2A,0x2A,0x2A,0x2A,0x2A,0x0,0x2A,0x2A,0x2A,0x2A,0x0,0x2A,0x2A,0x2A,0x0,0x0,0x0,0x2A,0x2A,0x0,0x0,0x0,0x2A
	ghost_pink: .byte 0x0,0x0,0x87,0x87,0x87,0x87,0x87,0x87,0x0,0x0,0x0,0x87,0x87,0x87,0x87,0x87,0x87,0x87,0x87,0x0,0x87,0x87,0xFF,0x87,0x87,0x87,0x87,0xFF,0x87,0x87,0x87,0xFF,0x0,0xFF,0x87,0x87,0xFF,0x0,0xFF,0x87,0x87,0xFF,0xFF,0x87,0x87,0x87,0x87,0xFF,0xFF,0x87,0x87,0x87,0x87,0x87,0x87,0x87,0x87,0x87,0x87,0x87,0x87,0x87,0x87,0x87,0x87,0x87,0x87,0x87,0x87,0x87,0x87,0x87,0x87,0x87,0x87,0x87,0x87,0x87,0x87,0x87,0x87,0x87,0x0,0x87,0x87,0x87,0x87,0x0,0x87,0x87,0x87,0x0,0x0,0x0,0x87,0x87,0x0,0x0,0x0,0x87
	ghost_blue: .byte 0x0,0x0,0xC0,0xC0,0xC0,0xC0,0xC0,0xC0,0x0,0x0,0x0,0xC0,0xC0,0xC0,0xC0,0xC0,0xC0,0xC0,0xC0,0x0,0xC0,0xC0,0xFF,0xC0,0xC0,0xC0,0xC0,0xFF,0xC0,0xC0,0xC0,0xFF,0x0,0xFF,0xC0,0xC0,0xFF,0x0,0xFF,0xC0,0xC0,0xFF,0xFF,0xC0,0xC0,0xC0,0xC0,0xFF,0xFF,0xC0,0xC0,0xC0,0xC0,0xC0,0xC0,0xC0,0xC0,0xC0,0xC0,0xC0,0xC0,0xC0,0xC0,0xC0,0xC0,0xC0,0xC0,0xC0,0xC0,0xC0,0xC0,0xC0,0xC0,0xC0,0xC0,0xC0,0xC0,0xC0,0xC0,0xC0,0xC0,0xC0,0x0,0xC0,0xC0,0xC0,0xC0,0x0,0xC0,0xC0,0xC0,0x0,0x0,0x0,0xC0,0xC0,0x0,0x0,0x0,0xC0
	#
	#		   x,y,score,ultima_tecla,cor,vidas_qtd,posicao_score	
	pac_amarelo: .word 2,22,0,0x64,0x3F,3,30
	pac_vermelho: .word 22,22,0,0x66,0x07,3,80
	#		      x,y,tile anterior,cor
	fantasma_verde: .word 11,10,0x00,0x2A
	fantasma_rosa: .word 12,10,0x00,0x87
	fantasma_azul: .word 13,10,0x00,0xC0
	ERRO_PONTO: .asciiz "Ponto fora do limite\n"
	
			  # SI,SI,F#,D#,SI,F#,D#,DO,DO,G ,MI,DO,G ,MI,SI,SI,F#,D#,SI,F#,D#,RE,D#,MI,FA,G ,G#,LA,A#,SI
	NOTAS_MUSICA: .word 71,71,66,63,71,66,63,72,72,67,64,72,67,64,71,71,66,63,71,66,63,62,63,64,65,67,68,69,71,71
	DURACAO_NOTA: .word 100,100,100,100,100,100,100,150,150,150,150,150,150,150,50,50,50,50,50,50,50,50,50,50,50,50,50,50,50,50 
	SCORE: .asciiz "SCORE:"
.text

MAIN:  
	jal MAPA
	#jal TESTE_RETA
	#jal loop
	jal START
	# Close the file 
	j EXIT
	
EXIT:	li $v0, 10
	syscall
		
MAPA:
	addi $sp,$sp,-4
	sw $ra,0($sp)
	la $s0,map_vetor
	li $s1,0
	li $s2,0
	la $s3,X
	la $s4,Y
while_mapa:
	beq $s2,$s4,exit_map	
	beq $s1,$s3,reseta_x
	move $a0,$s1
	move $a1,$s2
	lbu $a2,0($s0)
	jal DESENHO_ESCOLHA
	addi $s0,$s0,1
	addi $s1,$s1,10
	j while_mapa
reseta_x:
	li $s1,0
	addi $s2,$s2,10
	j while_mapa
exit_map:
	lw $ra,0($sp)
	addi $sp,$sp,4
	jr $ra

# $a0 = x , $a1 = y, a2 = desenho
DESENHO_ESCOLHA:
	addi $sp,$sp,-4
	sw $ra,0($sp)
	beq $a2,0xFF,desenho_comida
	beq $a2,0xFA,desenho_comidona
	beq $a2,0xAD,porta_fantasma
	move $a3,$a2
	li $a2,-1					# indica que o procedimento print_desenho deverá printar da variavel e não da memoria
	jal PRINT_DESENHO
	j return_desenho_escolha
	#
desenho_comida:
	li $a2,0					# indica que o procedimento print_desenho deverá printar da memoria	
	la $a3,tile_comida
	jal PRINT_DESENHO
	j return_desenho_escolha
	#
desenho_comidona:
	li $a2,0					# indica que o procedimento print_desenho deverá printar da memoria
	la $a3,tile_comidona
	jal PRINT_DESENHO
	j return_desenho_escolha
porta_fantasma:
	li $a2,0					# indica que o procedimento print_desenho deverá printar da memoria
	la $a3,tile_porta_fantasma
	jal PRINT_DESENHO
	j return_desenho_escolha
	#
return_desenho_escolha:	
	lw $ra,0($sp)
	addi $sp,$sp,4
	jr $ra

# $a0 = x, $a1 = y, $a3 = endereco_inicio_desenho, $a2 indicador se ler da memoria ou de constante	
PRINT_DESENHO:
	addi $sp,$sp,-32
	sw $ra,28($sp)
	sw $s0,24($sp)
	sw $s1,20($sp)
	sw $s2,16($sp)
	sw $s3,12($sp)
	sw $s4,8($sp)
	sw $s5,4($sp)
	sw $s6,0($sp)
		
	move $s0,$a3
	move $s1,$a0					# $s1 = x inicio
	move $s2,$a1 					# $s2 = y inicio
	addi $s3,$a0,10					# $s3 = x + 10 (x final)
	addi $s4,$a1,10					# $s4 = y + 10 (x final)
	move $s5,$s1
	move $s6,$a2					# $s6 = $a2 (indicador ler da memoria ou de constante)
while_desenho:
	beq $s2,$s4,exit_desenho	
	beq $s1,$s3,reseta_x_desenho
	move $a0,$s1
	move $a1,$s2
	bne $s6,-1,ler_memoria_desenho			# se não é -1 e devemos ler da memoria
	move $a2,$s0					# $a2 = $s0	
	j ponto_desenho					
ler_memoria_desenho:	
	lbu $a2,0($s0)
	addi $s0,$s0,1
ponto_desenho:
	jal PONTO
	addi $s1,$s1,1
	j while_desenho
reseta_x_desenho:
	move $s1,$s5 					# restaura x 
	addi $s2,$s2,1
	j while_desenho
exit_desenho:
	lw $ra,28($sp)
	lw $s0,24($sp)
	lw $s1,20($sp)
	lw $s2,16($sp)
	lw $s3,12($sp)
	lw $s4,8($sp)
	lw $s5,4($sp)
	lw $s6,0($sp)
	addi $sp,$sp,32
	jr $ra

# $a0 = x, $a1 = y, $a3 = desenho	
PRINT_LINHA_VERTICAL:
	addi $sp,$sp,-20
	sw $ra,16($sp)
	sw $s0,12($sp)
	sw $s1,8($sp)
	sw $s2,4($sp)
	sw $s3,0($sp)
	#		
	move $s0,$a0					# $s0 = x inicio
	move $s1,$a1 					# $s1 = y inicio
	addi $s2,$a1,10					# $s2 = y + 10 (y final)
	move $s3,$a3
while_desenho_vertical:
	beq $s1,$s2,exit_desenho_vertical	
	move $a0,$s0
	move $a1,$s1
	move $a2,$s3
	jal PONTO
	addi $s1,$s1,1
	j while_desenho_vertical
exit_desenho_vertical:
	lw $ra,16($sp)
	lw $s0,12($sp)
	lw $s1,8($sp)
	lw $s2,4($sp)
	lw $s3,0($sp)
	addi $sp,$sp,20
	jr $ra
	
# $a0 = x, $a1 = y, $a3 = desenho	
PRINT_LINHA_HORIZONTAL:
	addi $sp,$sp,-20
	sw $ra,16($sp)
	sw $s0,12($sp)
	sw $s1,8($sp)
	sw $s2,4($sp)
	sw $s3,0($sp)
	#		
	move $s0,$a0					# $s0 = x inicio
	move $s1,$a1 					# $s1 = y inicio
	addi $s2,$a0,10					# $s2 = y + 10 (y final)
	move $s3,$a3
while_desenho_horizontal:
	beq $s0,$s2,exit_desenho_horizontal	
	move $a0,$s0
	move $a1,$s1
	move $a2,$s3
	jal PONTO
	addi $s0,$s0,1
	j while_desenho_horizontal
exit_desenho_horizontal:
	lw $ra,16($sp)
	lw $s0,12($sp)
	lw $s1,8($sp)
	lw $s2,4($sp)
	lw $s3,0($sp)
	addi $sp,$sp,20
	jr $ra
				
#$a0 = x, $a1 =y , $a2 = cor	
PONTO: 	
	addi $sp,$sp,-4
	sw $ra,0($sp)
	jal ENDERECO_PONTO
	move $t0,$v0
	sb $a2, 0($t0) 				# salva $a2 (cor) no byte que $t0 corresponde.
	lw $ra,0($sp)
	addi $sp,$sp,4
	jr $ra
	
#$a0 = x, $a1 =y 	
ENDERECO_PONTO:
	la $t0, VGA_BASE
	la $t2, X
	la $t3, Y
	slt $t4,$a0,$t2 			# a0 < $t2(X)
	beqz $t4,ponto_fora_limite
	slt $t4,$a1,$t3 			# a1 < $t3(Y)
	beqz $t4,ponto_fora_limite
	mul $t1, $a1, $t2 			# $t1 = $a1(y) * 320; 
	add $t1, $t1, $a0 			# $t1 = $t1($a1(y) * 320) + $a0(x); 
	add $t0, $t0, $t1 			# $t0 = 0xFF000000 + y * 320 + x
	move $v0,$t0
	jr $ra
ponto_fora_limite:
	addi $v0,$zero,4 			# x ou y estão fora do limite
	la $a0, ERRO_PONTO
	syscall
	j EXIT
	
START:  
	addi $sp,$sp,-4
	sw $ra,0($sp)
	li $t0, 0xffff
	jal INIT_PONTUACOES
	jal init_pac_yellow
	jal init_pac_red
	jal init_ghost_green
	jal init_ghost_pink
	jal init_ghost_blue
	#jal MUSICA_INICIAL
loop_ready_tecla:
	#mtc0 $0, $9				# Reinicia o campo em ms
	#jal stop
	lw $t1,0xFF100000	        	# Busca se há interrupção no teclado
	andi $t1, $t1, 0x0001			# Le bit de Controle Teclado
    	#addi $t0,$zero,-1               	# Decrementa o contado do clico
    	j check_key
    	#bnez $t0, loop_ready_tecla
	#beqz $a0, move_ghost           	# Se não a interrupção do teclado move só os fantasmas
                                    		# solos a los fantasmas
        lw $ra,0($sp)
        addi $sp,$sp,4
        jr $ra
    	
check_key:
    	bnez $t1, load_key			# Se houve interrupção do teclado
    	li $s7,-1				# Marca $s7 não clicado
    	li $s5,-1				# $s5 representa que não é uma tecla
    	j moves_check
load_key:
	lw $s5, 0xFF100004			# Carrega a tecla pressionada
    	#
    	li $s7,0x3F    				# Marca $s7 clicado pac yellow
    	li $t1, 0x61				# Carrega a tecla 'a'
    	beq $t1, $s5, moves_check
    	li $t1, 0x64                		# Carrega a tecla 'd' para verificar se foi a pressionada
	beq $t1, $s5, moves_check
	li $t1, 0x77                		# Carrega a tecla 'w' para verificar se foi a pressionada
	beq $t1, $s5, moves_check
	li $t1, 0x73                		# Carrega a tecla 's' para verificar se foi a pressionada
	beq $t1, $s5, moves_check
	#
	li $s7,0x07				# Marca $s7 clicado pac red
	li $t1, 0x66				# Carrega a tecla 'f'
    	beq $t1, $s5, moves_check
    	li $t1, 0x68                		# Carrega a tecla 'h' 
	beq $t1, $s5, moves_check
	li $t1, 0x74                		# Carrega a tecla 't' 
	beq $t1, $s5, moves_check
	li $t1, 0x67                		# Carrega a tecla 'g' 
	beq $t1, $s5, moves_check
	
moves_check:
	addi $sp,$sp,-4
	sw $s5,0($sp)				# Guarda valor de $s5
    	jal move_pac_yellow
    	lw $s5,0($sp)				
    	jal move_pac_red
    	jal move_ghosts
    	addi $sp,$sp,4
    	#
    	li $t1, 0x71                    	# Carrega a tecla 'q' para sair
    	beq $t1, $t2, EXIT
    	j loop_ready_tecla

INIT_PONTUACOES:
	addi $sp,$sp,-8
	sw $ra,0($sp)
	sw $s0,4($sp)
# Início pontuação yellow
	li $a0,0				# Número a ser printado
	li $a2,30				# linha score yellow pac
	jal PRINT_SCORE
	li $s0,260				# x
	li $a0,260				# x
	li $a1,40				# y
loop_init_p_yellow:	
	move $a0,$s0
	li $a1,40				# y
	la $a3,pac_man_yellow_open_right
	jal PRINT_DESENHO
	addi $s0,$s0,15
	bne $s0,305,loop_init_p_yellow
# Início Red
	li $a0,0				# Número a ser printado
	li $a2,80				# linha score red pac
	jal PRINT_SCORE
	li $s0,260				# x
	li $a0,260				# x
	li $a1,90				# y
loop_init_p_red:	
	move $a0,$s0
	li $a1,90				# y
	la $a3,pac_man_red_open_right
	jal PRINT_DESENHO
	addi $s0,$s0,15
	bne $s0,305,loop_init_p_red
	#
	lw $s0,4($sp)
	lw $ra,0($sp)
	addi $sp,$sp,8
	jr $ra	    


# $a0=numero a ser printado, $a2= linha(y)	
PRINT_SCORE:
	li $a1,260				# coluna
	li $a3,0x00FF				# cores de frente(FF) e fundo(00) do texto
	li $v0,101				# print int
	syscall
	jr $ra
	 
init_pac_yellow:
	addi $sp,$sp,-4
	sw $ra,0($sp)
	la $t0,pac_amarelo
	la $a3,pac_man_yellow_open_right
	j init_personagens

init_pac_red:
	addi $sp,$sp,-4
	sw $ra,0($sp)
	la $t0,pac_vermelho
	la $a3,pac_man_red_open_left
	j init_personagens
	
init_ghost_green:
	addi $sp,$sp,-4
	sw $ra,0($sp)
	la $t0,fantasma_verde
	la $a3,ghost_green
	j init_personagens
	
init_ghost_pink:
	addi $sp,$sp,-4
	sw $ra,0($sp)
	la $t0,fantasma_rosa
	la $a3,ghost_pink
	j init_personagens
		
init_ghost_blue:
	addi $sp,$sp,-4
	sw $ra,0($sp)
	la $t0,fantasma_azul
	la $a3,ghost_blue
	j init_personagens
	
init_personagens:
	lw $a0,0($t0)				# x inicial personagem
	lw $a1,4($t0)				# y inicial personagem
	mul $a0,$a0,10
	mul $a1,$a1,10
	jal PRINT_DESENHO			# $a3 carrega o desenho que será printado
	lw $ra,0($sp)
	addi $sp,$sp,4
	jr $ra
			
move_pac_yellow:
	la $s4,pac_amarelo
	lw $s0,0($s4)
	lw $s1,4($s4)
	beq $s7,0x3F,continue_pac_yellow	# Se $s7 = yellow(0x3F), foi clicado alguma tecla do pac yellow
	lw $s5,12($s4)				# Se chegou aqui o pac yellow não foi clicado. Carrega a ultima tecla apertada
continue_pac_yellow:				# atualiza o valor para ultima tecla apertada
	addi $sp,$sp,-4
	sw $ra,0($sp) 
	li $t1, 0x61				# Carrega a tecla 'a' para verificar se foi a pressionada
	la $s2,pac_man_yellow_open_left		# Carrega o desenho do pac pra esquerda aberto
	la $s3,pac_man_yellow_close		# Carrega o desenho do pac fechado
	beq $t1, $s5, move_left
    	#
    	li $t1, 0x64                		# Carrega a tecla 'd' para verificar se foi a pressionada
	la $s2,pac_man_yellow_open_right	# Carrega o desenho do pac pra direita aberto
	la $s3,pac_man_yellow_close		# Carrega o desenho do pac fechado
	beq $t1, $s5, move_right
	#
	li $t1, 0x77                		# Carrega a tecla 'w' para verificar se foi a pressionada
	la $s2,pac_man_yellow_open_top		# Carrega o desenho do pac pra cima aberto
	la $s3,pac_man_yellow_close		# Carrega o desenho do pac fechado
	beq $t1, $s5, move_top
	#
	li $t1, 0x73                		# Carrega a tecla 's' para verificar se foi a pressionada
	la $s2,pac_man_yellow_open_down		# Carrega o desenho do pac pra baixo aberto
	la $s3,pac_man_yellow_close		# Carrega o desenho do pac fechado
	beq $t1, $s5, move_down	
	# 
	j return_move

move_pac_red:
	la $s4,pac_vermelho
	lw $s0,0($s4)
	lw $s1,4($s4)
	beq $s7,0x07,continue_pac_red		# Se $s7 = yellow(0x07), foi clicado alguma tecla do pac red
	lw $s5,12($s4)				# Se chegou aqui pac red não clicado. Carrega a ultima tecla apertada
continue_pac_red:
	addi $sp,$sp,-4
	sw $ra,0($sp) 
	li $t1, 0x66				# Carrega a tecla 'f' para verificar se foi a pressionada
	la $s2,pac_man_red_open_left		# Carrega o desenho do pac pra esquerda aberto
	la $s3,pac_man_red_close		# Carrega o desenho do pac pra esquerda fechado
	beq $t1, $s5, move_left
    	#
    	li $t1, 0x68                		# Carrega a tecla 'h' para verificar se foi a pressionada
	la $s2,pac_man_red_open_right		# Carrega o desenho do pac pra direita aberto
	la $s3,pac_man_red_close		# Carrega o desenho do pac pra direita fechado
	beq $t1, $s5, move_right
	#
	li $t1, 0x74                		# Carrega a tecla 't' para verificar se foi a pressionada
	la $s2,pac_man_red_open_top		# Carrega o desenho do pac pra cima aberto
	la $s3,pac_man_red_close		# Carrega o desenho do pac pra cima fechado
	beq $t1, $s5, move_top
	#
	li $t1, 0x67                		# Carrega a tecla 'g' para verificar se foi a pressionada
	la $s2,pac_man_red_open_down		# Carrega o desenho do pac pra baixo aberto
	la $s3,pac_man_red_close		# Carrega o desenho do pac pra baixo fechado
	beq $t1, $s5, move_down	
	# 
	j return_move
	
return_move:
	lw $ra,0($sp)
	addi $sp,$sp,4
	jr $ra
		    
move_right:
 	move $a0,$s0
 	move $a1,$s1
 	move $a3,$s4				# Guarda em $a2 o endereço do objeto(pac ou fantasma)
 	addi $a0,$a0,1
 	jal VERIFICA_POSSIBILIDADE
 	addi $t0,$s0,1				
 	sw $t0,0($s4)				# Salva nova coordenada x
	sw $s1,4($s4)				# Salva nova coordenada y
 	mul $s0,$s0,10				
	mul $s1,$s1,10
 	sw $s5,12($s4)				# atualiza o valor para ultima tecla apertada
 	li $s6,0
loop_move_right:
  	move $a0,$s0
 	move $a1,$s1
	li $a3,0x00 				# cor preta
	jal PRINT_LINHA_VERTICAL
	addi $s0,$s0,1
	move $a0,$s0
	move $a1,$s1
	move $a3,$s3 				# $s3 contem o desenho respectivo 
	jal PRINT_DESENHO
	move $a0,$s0
	move $a1,$s1
	li $a3,0x00	 			# cor preta
	jal PRINT_LINHA_VERTICAL
	addi $s0,$s0,1
	move $a0,$s0
	move $a1,$s1
	move $a3,$s2				# $s2 contem o desenho respectivo
	jal PRINT_DESENHO
	addi $s6,$s6,1
	bne $s6,5,loop_move_right
	j return_move
	
move_left:
	move $a0,$s0
 	move $a1,$s1
 	move $a3,$s4				# Guarda em $a2 o endereço do objeto(pac ou fantasma)
 	addi $a0,$a0,-1
 	jal VERIFICA_POSSIBILIDADE
 	addi $t0,$s0,-1				
 	sw $t0,0($s4)				# Salva nova coordenada x
	sw $s1,4($s4)				# Salva nova coordenada y
 	mul $s0,$s0,10				
	mul $s1,$s1,10
 	sw $s5,12($s4)				# atualiza o valor para ultima tecla apertada
 	li $s6,0
loop_move_left:
 	addi $a0,$s0,9
 	move $a1,$s1
	li $a3,0x00 				# cor preta
	jal PRINT_LINHA_VERTICAL
	addi $s0,$s0,-1
	move $a0,$s0
	move $a1,$s1
	move $a3,$s3 				# $s3 contem o desenho respectivo 
	jal PRINT_DESENHO
	addi $a0,$s0,9
	move $a1,$s1
	li $a3,0x00 				# cor preta
	jal PRINT_LINHA_VERTICAL
	addi $s0,$s0,-1
	move $a0,$s0
	move $a1,$s1
	move $a3,$s2				# $s2 contem o desenho respectivo
	jal PRINT_DESENHO
	addi $s6,$s6,1
	bne $s6,5,loop_move_left
	j return_move	 

move_top:
	move $a0,$s0
 	move $a1,$s1
 	move $a3,$s4				# Guarda em $a2 o endereço do objeto(pac ou fantasma)
 	addi $a1,$a1,-1
 	jal VERIFICA_POSSIBILIDADE
 	addi $t1,$s1,-1				
 	sw $s0,0($s4)				# Salva nova coordenada x
	sw $t1,4($s4)				# Salva nova coordenada y
 	mul $s0,$s0,10				
	mul $s1,$s1,10
 	sw $s5,12($s4)				# atualiza o valor para ultima tecla apertada
	li $s6,0
loop_move_top:
	move $a0,$s0
 	addi $a1,$s1,9
	li $a3,0x00 				# cor preta
	jal PRINT_LINHA_HORIZONTAL
	addi $s1,$s1,-1
	move $a0,$s0
	move $a1,$s1
	move $a3,$s3 				# $s3 contem o desenho respectivo 
	jal PRINT_DESENHO
	move $a0,$s0
 	addi $a1,$s1,9
	li $a3,0x00 				# cor preta
	jal PRINT_LINHA_HORIZONTAL
	addi $s1,$s1,-1
	move $a0,$s0
	move $a1,$s1
	move $a3,$s2				# $s2 contem o desenho respectivo
	jal PRINT_DESENHO
	addi $s6,$s6,1
	bne $s6,5,loop_move_top
	j return_move
	
move_down:
	move $a0,$s0
 	move $a1,$s1
 	move $a3,$s4				# Guarda em $a3 o endereço do objeto(pac ou fantasma)
 	addi $a1,$a1,1
 	jal VERIFICA_POSSIBILIDADE
 	addi $t1,$s1,1				# Incrementa a posicao em 1
 	sw $s0,0($s4)				# Salva nova coordenada x
	sw $t1,4($s4)				# Salva nova coordenada y
 	mul $s0,$s0,10				
	mul $s1,$s1,10
 	sw $s5,12($s4)				# atualiza o valor para ultima tecla apertada
 	li $s6,0
loop_move_down:
	move $a0,$s0
 	move $a1,$s1
	li $a3,0x00 				# cor preta
	jal PRINT_LINHA_HORIZONTAL
	addi $s1,$s1,1
	move $a0,$s0
	move $a1,$s1
	move $a3,$s3 				# $s3 contem o desenho respectivo 
	jal PRINT_DESENHO
	move $a0,$s0
	move $a1,$s1
	li $a3,0x00 				# cor preta
	jal PRINT_LINHA_HORIZONTAL
	addi $s1,$s1,1
	move $a0,$s0
	move $a1,$s1
	move $a3,$s2				# $s2 contem o desenho respectivo
	jal PRINT_DESENHO
	addi $s6,$s6,1
	bne $s6,5,loop_move_down
	j return_move

# Move ghosts
move_ghosts:
	addi $sp,$sp,-4
	sw $ra,0($sp)
	jal move_ghost_green
	jal move_ghost_pink
	jal move_ghost_blue
	lw $ra,0($sp)
	addi $sp,$sp,4
	jr $ra

move_ghost_green:
	addi $sp,$sp,-4
	sw $ra,0($sp)
	la $s4,fantasma_verde
	lw $s0,0($s4)
	lw $s1,4($s4)
	la $s3,ghost_green
	seq $t0,$s0,11
	beqz $t0,return_move			# se $t0 for zero $s0 já não é 11 e ele sai
	seq $t1,$s1,10
	beq $t0,$t1,move_ghost_init		# chegou aqui $t0 = 1 se $t1 = 1 o fantasma ta no ponto inicial
	j return_move	
	
move_ghost_pink:
	addi $sp,$sp,-4
	sw $ra,0($sp)
	la $s4,fantasma_rosa
	lw $s0,0($s4)
	lw $s1,4($s4)
	la $s3,ghost_pink
	seq $t0,$s0,12
	beqz $t0,return_move			# se $t0 for zero $s0 já não é 12 e ele sai
	seq $t1,$s1,10
	beq $t0,$t1,move_ghost_init		# chegou aqui $t0 = 1 se $t1 = 1 o fantasma ta no ponto inicial
	j return_move
	
move_ghost_blue:
	addi $sp,$sp,-4
	sw $ra,0($sp)
	la $s4,fantasma_azul
	lw $s0,0($s4)
	lw $s1,4($s4)
	la $s3,ghost_blue
	seq $t0,$s0,13
	beqz $t0,return_move			# se $t0 for zero $s0 já não é 13 e ele sai
	seq $t1,$s1,10
	beq $t0,$t1,move_ghost_init		# chegou aqui $t0 = 1 se $t1 = 1 o fantasma ta no ponto inicial
	j return_move

move_ghost_init:
	move $a0,$s0
 	move $a1,$s1
 	addi $t1,$s1,-2				
 	sw $s0,0($s4)				# Salva nova coordenada x
	sw $t1,4($s4)				# Salva nova coordenada y
 	mul $s0,$s0,10				
	mul $s1,$s1,10
	li $s6,0
loop_ghost_preto:
	move $a0,$s0
 	addi $a1,$s1,9
	li $a3,0x00 				# reset linha preta
	jal PRINT_LINHA_HORIZONTAL	
	addi $s1,$s1,-1
	move $a0,$s0
	move $a1,$s1
	move $a3,$s3 				# $s3 contem o desenho respectivo 
	jal PRINT_DESENHO
	addi $s6,$s6,1
	bne $s6,10,loop_ghost_preto
	li $s6,0
loop_ghost_cinza:
	move $a0,$s0
	addi $a1,$s1,9
	li $a3,0xAD				# reset linha cinza
	jal PRINT_LINHA_HORIZONTAL
	addi $s1,$s1,-1
	move $a0,$s0
	move $a1,$s1
	move $a3,$s3				# $s2 contem o desenho respectivo
	jal PRINT_DESENHO
	addi $s6,$s6,1
	bne $s6,10,loop_ghost_cinza
	j return_move

#$a0 = x, $a1 = y, $a3 = endereco_objeto(pac,ghost)
VERIFICA_POSSIBILIDADE:
	la $t0, map_vetor
	la $t2, Xmap
	# carrega endereco da proxima posicao (x e y antes de andar)
	mul $t1, $a1, $t2 			# $t1 = $a1(y) * 32 ; 
	add $t1, $t1, $a0 			# $t1 = $t1($a1(y) * 32) + $a0(x); 
	add $t0, $t0, $t1 			# $t0 = map_vetor + y * 320 + x
	lw $t4, 16($a3) 			# carrega $t4 cor do objeto(pac ou fantasma)
	beq $t4,0x3F,pac_possibilidade		# $t4 = 0x3F (pac_amarelo )vai para pac_possibilidade
	#	
	beq $t4,0x07,pac_possibilidade		# $t4 = 0x07 (pac_vermelho) vai para pac_possibilidade
	#
	beq $t4,0x2A,fantasma_possibilidade	# $t4 = 0x2A (fantasma_verde) vai para fantasma_possibilidade
	j return_move				# se chegar aqui, não é um pac ou um fantasma

pac_possibilidade:
	lbu $t2,0($t0)				# carrega $t2 (tile) no byte que $t0 corresponde.
	beqz $t2,possivel_pac			# $t2 igual a 0x00(preto)
	#
	beq $t2,0xFF,possivel_pac_comida	# $t2 = 0xFF (comida) vai para possivel comida
	#
	beq $t2,0xFA,possivel_pac_comidona	# $t2= 0xFA (comidona) vai para possivel
	#
	la $t1,pac_amarelo			# carrega em $t1 endereço do pac_amarelo
	beq $t2,0x3F,pac_comer_possibilidade	# $t2 = 0x3F(pac_amarelo) vai pac_amarelo possibilidade
	#
	la $t1,pac_vermelho			# carrega em $t1 endereço do pac_vermelho
	beq $t2,0x07,pac_comer_possibilidade	# $t2 = 0x07(pac_vermelho) vai pac_vermelho possibilidade
	j return_move				# se chegar aqui, pode andar

possivel_pac_comida:
	addi $sp,$sp,-4
	sw $ra,0($sp)
	lw $a0,8($a3)
	addi $a0,$a0,10				# adiciona 10 na pontuação do pac
	sw $a0,8($a3)				# $a0 = pontuação
	lw $a2,24($a3)				# $a2 = posicao score
	jal PRINT_SCORE
	lw $ra,0($sp)
	addi $sp,$sp,4
	j possivel_pac
	
possivel_pac_comidona:
	addi $sp,$sp,-4
	sw $ra,0($sp)
	lw $a0,8($a3)
	addi $a0,$a0,50				# adiciona 50 na pontuação do pac
	sw $a0,8($a3)				# $a0 = pontuação
	lw $a2,24($a3)				# $a2 = posicao score
	jal PRINT_SCORE
	lw $ra,0($sp)
	addi $sp,$sp,4
	j possivel_pac
	
possivel_pac:
	sb $t4,0($t0)				# atualiza proxima posicao no map para o pac
	# carrega endereco da posicao atual (x e y antes de andar)
	la $t0, map_vetor
	la $t2, Xmap
	mul $t1, $s1, $t2 			# $t1 = $a1(y) * 32 ; 
	add $t1, $t1, $s0 			# $t1 = $t1($a1(y) * 32) + $a0(x); 
	add $t1, $t0, $t1 			# $t1 = map_vetor + y * 320 + x
	# fim carrega endereco
	li $t4,0				# carrega cor preta
	sb $t4,0($t1)				# atualiza posicao atual do mapa para preta
	jr $ra	
	
pac_comer_possibilidade:
	lw $t3,8($t1)				# carrega pontuação do pac que se quer comer
	lw $t4,8($a3)				# carrega pontuação pac atual
	blt $t3,$t4,possivel_pac		# pontuação do pac que se quer comer menor que a do pac atual, pode comer	
	j return_move				# se chegar aqui, não pode comer(andar)

				
fantasma_possibilidade:
	jr $ra
	
MUSICA_INICIAL:
	li $s1,30
	la $s0,NOTAS_MUSICA
	la $s2,DURACAO_NOTA
	li $t0,0
	li $a2,0	# instrumento
	li $a3,75	# volume

loop_musica:	
	beq $t0,$s1, fim_musica
	lw $a0,0($s0)		# nota
	lw $a1,0($s2)		# duracao
	li $v0,31		# 33 da pausa a mais
	syscall
	move $a0,$a1		#pausa = duracao
	li $v0,32
	syscall
	addi $s0,$s0,4		# proxima nota
	addi $s2,$s2,4		# proxima duração
	addi $t0,$t0,1
	j loop_musica
fim_musica:
	jr $ra
