.eqv VGA_BASE 0xFF000000
.eqv X 320 # 320 - 10
.eqv Y 240 # 240 - 10
.eqv Xmap 32
.eqv Ymap 24

.data
	map_vetor: .byte 0x00,0x99,0x99,0x99,0x99,0x99,0x99,0x99,0x99,0x99,0x99,0x99,0x99,0x99,0x99,0x99,0x99,0x99,0x99,0x99,0x99,0x99,0x99,0x99,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x99,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0x99,0x99,0xFF,0x99,0x99,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0x99,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x99,0xFF,0x99,0x99,0xFF,0x99,0x99,0x99,0xFF,0x99,0x99,0xFF,0x99,0x99,0xFF,0x99,0x99,0x99,0xFF,0x99,0x99,0xFF,0x99,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x99,0xFA,0x99,0x99,0xFF,0x99,0x99,0x99,0xFF,0x99,0x99,0xFF,0x99,0x99,0xFF,0x99,0x99,0x99,0xFF,0x99,0x99,0xFA,0x99,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x99,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0x99,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x99,0xFF,0x99,0x99,0xFF,0x99,0xFF,0x99,0x99,0x99,0x99,0x99,0x99,0x99,0x99,0x99,0xFF,0x99,0xFF,0x99,0x99,0xFF,0x99,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x99,0xFF,0xFF,0xFF,0xFF,0x99,0xFF,0xFF,0xFF,0x99,0x99,0x99,0x99,0x99,0xFF,0xFF,0xFF,0x99,0xFF,0xFF,0xFF,0xFF,0x99,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x99,0x99,0x99,0x99,0xFF,0x99,0x99,0x99,0x00,0x99,0x99,0x99,0x99,0x99,0x00,0x99,0x99,0x99,0xFF,0x99,0x99,0x99,0x99,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x99,0xFF,0x99,0x99,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x99,0x99,0xFF,0x99,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x99,0xFF,0x99,0x99,0x00,0x99,0x99,0xAD,0xAD,0xAD,0x99,0x99,0x00,0x99,0x99,0xFF,0x99,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x99,0xFF,0x99,0x99,0x00,0x99,0x99,0x00,0x00,0x00,0x99,0x99,0x00,0x99,0x99,0xFF,0x99,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x99,0xFF,0x00,0x00,0x00,0x99,0x99,0x99,0x99,0x99,0x99,0x99,0x00,0x00,0x00,0xFF,0x99,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x99,0xFF,0x99,0x99,0x00,0x99,0x99,0x99,0x99,0x99,0x99,0x99,0x00,0x99,0x99,0xFF,0x99,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x99,0xFF,0x99,0x99,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0x99,0x99,0xFF,0x99,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x99,0x99,0x99,0x99,0xFF,0x99,0x99,0xFF,0x99,0x99,0x99,0xFF,0x99,0x99,0x99,0xFF,0x99,0x99,0xFF,0x99,0x99,0x99,0x99,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x99,0xFA,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0x99,0x99,0xFF,0x99,0x99,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFA,0x99,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x99,0xFF,0x99,0x99,0xFF,0x99,0x99,0x99,0xFF,0x99,0x99,0xFF,0x99,0x99,0xFF,0x99,0x99,0x99,0xFF,0x99,0x99,0xFF,0x99,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x99,0xFF,0xFF,0x99,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0x99,0xFF,0xFF,0x99,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x99,0x99,0xFF,0x99,0xFF,0x99,0xFF,0x99,0x99,0x99,0x99,0xFF,0x99,0x99,0x99,0x99,0xFF,0x99,0xFF,0x99,0xFF,0x99,0x99,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x99,0x99,0xFF,0x99,0xFF,0x99,0xFF,0x99,0x99,0x99,0x99,0xFF,0x99,0x99,0x99,0x99,0xFF,0x99,0xFF,0x99,0xFF,0x99,0x99,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x99,0xFF,0xFF,0xFF,0xFF,0x99,0xFF,0xFF,0xFF,0x99,0x99,0xFF,0x99,0x99,0xFF,0xFF,0xFF,0x99,0xFF,0xFF,0xFF,0xFF,0x99,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x99,0xFF,0x99,0x99,0x99,0x99,0x99,0x99,0xFF,0x99,0x99,0xFF,0x99,0x99,0xFF,0x99,0x99,0x99,0x99,0x99,0x99,0xFF,0x99,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x99,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0x99,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x99,0x99,0x99,0x99,0x99,0x99,0x99,0x99,0x99,0x99,0x99,0x99,0x99,0x99,0x99,0x99,0x99,0x99,0x99,0x99,0x99,0x99,0x99,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
	#
	tile_comida: .byte 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xFF,0xFF,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xFF,0xFF,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
	tile_comidona: .byte 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xFF,0xFF,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xFF,0xFF,0xFF,0xFF,0x00,0x00,0x00,0x00,0x00,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0x00,0x00,0x00,0x00,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0x00,0x00,0x00,0x00,0x00,0xFF,0xFF,0xFF,0xFF,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xFF,0xFF,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
	tile_porta_fantasma: .byte 0xAD,0xAD,0xAD,0xAD,0xAD,0xAD,0xAD,0xAD,0xAD,0xAD,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
	#
	pac_man_close_x: .byte 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x3F,0x3F,0x3F,0x3F,0x00,0x00,0x00,0x00,0x00,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x00,0x00,0x00,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x00,0x00,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x00,0x00,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x00,0x00,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x00,0x00,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x00,0x00,0x00,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x00,0x00,0x00,0x00,0x00,0x3F,0x3F,0x3F,0x3F,0x00,0x00,0x00	
	pac_man_open_right: .byte 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x3F,0x3F,0x3F,0x3F,0x3F,0x00,0x00,0x00,0x00,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x00,0x00,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x00,0x00,0x00,0x00,0x3F,0x3F,0x3F,0x3F,0x00,0x00,0x00,0x00,0x00,0x00,0x3F,0x3F,0x3F,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x3F,0x3F,0x3F,0x3F,0x00,0x00,0x00,0x00,0x00,0x00,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x00,0x00,0x00,0x00,0x00,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x00,0x00,0x00,0x00,0x3F,0x3F,0x3F,0x3F,0x3F,0x00,0x00
	pac_man_open_big_right: .byte 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x3F,0x3F,0x3F,0x3F,0x3F,0x00,0x00,0x00,0x00,0x3F,0x3F,0x3F,0x3F,0x3F,0x00,0x00,0x00,0x00,0x3F,0x3F,0x3F,0x3F,0x3F,0x00,0x00,0x00,0x00,0x00,0x3F,0x3F,0x3F,0x3F,0x00,0x00,0x00,0x00,0x00,0x00,0x3F,0x3F,0x3F,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x3F,0x3F,0x3F,0x3F,0x00,0x00,0x00,0x00,0x00,0x00,0x3F,0x3F,0x3F,0x3F,0x3F,0x00,0x00,0x00,0x00,0x00,0x00,0x3F,0x3F,0x3F,0x3F,0x3F,0x00,0x00,0x00,0x00,0x00,0x00,0x3F,0x3F,0x3F,0x3F,0x3F,0x00,0x00
	pac_man_open_left: .byte 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x3F,0x3F,0x3F,0x3F,0x3F,0x00,0x00,0x00,0x00,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x00,0x00,0x00,0x00,0x00,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x00,0x00,0x00,0x00,0x00,0x00,0x3F,0x3F,0x3F,0x3F,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x3F,0x3F,0x3F,0x00,0x00,0x00,0x00,0x00,0x00,0x3F,0x3F,0x3F,0x3F,0x00,0x00,0x00,0x00,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x00,0x00,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x00,0x00,0x00,0x00,0x3F,0x3F,0x3F,0x3F,0x3F,0x00,0x00,0x00
	pac_man_open_big_left: .byte 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x3F,0x3F,0x3F,0x3F,0x3F,0x00,0x00,0x00,0x00,0x00,0x00,0x3F,0x3F,0x3F,0x3F,0x3F,0x00,0x00,0x00,0x00,0x00,0x00,0x3F,0x3F,0x3F,0x3F,0x3F,0x00,0x00,0x00,0x00,0x00,0x00,0x3F,0x3F,0x3F,0x3F,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x3F,0x3F,0x3F,0x00,0x00,0x00,0x00,0x00,0x00,0x3F,0x3F,0x3F,0x3F,0x00,0x00,0x00,0x00,0x00,0x3F,0x3F,0x3F,0x3F,0x3F,0x00,0x00,0x00,0x00,0x3F,0x3F,0x3F,0x3F,0x3F,0x00,0x00,0x00,0x00,0x3F,0x3F,0x3F,0x3F,0x3F,0x00,0x00,0x00
	#
	pac_man_close_y: .byte 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x3F,0x3F,0x3F,0x3F,0x3F,0x00,0x00,0x00,0x00,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x00,0x00,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x00,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x00,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x00,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x00,0x00,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x00,0x00,0x00,0x00,0x3F,0x3F,0x3F,0x3F,0x3F,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
	pac_man_open_down: .byte 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x3F,0x3F,0x3F,0x3F,0x3F,0x00,0x00,0x00,0x00,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x00,0x00,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x00,0x3F,0x3F,0x3F,0x3F,0x00,0x3F,0x3F,0x3F,0x3F,0x00,0x3F,0x3F,0x3F,0x00,0x00,0x00,0x3F,0x3F,0x3F,0x00,0x3F,0x3F,0x3F,0x00,0x00,0x00,0x3F,0x3F,0x3F,0x00,0x3F,0x3F,0x00,0x00,0x00,0x00,0x00,0x3F,0x3F,0x00,0x00,0x3F,0x00,0x00,0x00,0x00,0x00,0x3F,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
	pac_man_open_big_down: .byte 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x3F,0x3F,0x3F,0x3F,0x3F,0x00,0x00,0x00,0x00,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x00,0x00,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x00,0x3F,0x3F,0x3F,0x3F,0x00,0x3F,0x3F,0x3F,0x3F,0x00,0x3F,0x3F,0x3F,0x00,0x00,0x00,0x3F,0x3F,0x3F,0x00,0x3F,0x3F,0x00,0x00,0x00,0x00,0x00,0x3F,0x3F,0x00,0x3F,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x3F,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
	pac_man_open_top: .byte 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x3F,0x00,0x00,0x00,0x00,0x00,0x3F,0x00,0x00,0x3F,0x3F,0x00,0x00,0x00,0x00,0x00,0x3F,0x3F,0x00,0x3F,0x3F,0x3F,0x00,0x00,0x00,0x3F,0x3F,0x3F,0x00,0x3F,0x3F,0x3F,0x00,0x00,0x00,0x3F,0x3F,0x3F,0x00,0x3F,0x3F,0x3F,0x3F,0x00,0x3F,0x3F,0x3F,0x3F,0x00,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x00,0x00,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x00,0x00,0x00,0x00,0x3F,0x3F,0x3F,0x3F,0x3F,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
	pac_man_open_big_top: .byte 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x3F,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x3F,0x00,0x3F,0x3F,0x00,0x00,0x00,0x00,0x00,0x3F,0x3F,0x00,0x3F,0x3F,0x3F,0x00,0x00,0x00,0x3F,0x3F,0x3F,0x00,0x3F,0x3F,0x3F,0x3F,0x00,0x3F,0x3F,0x3F,0x3F,0x00,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x00,0x00,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x00,0x00,0x00,0x00,0x3F,0x3F,0x3F,0x3F,0x3F,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
	#
	ghost_up1: .byte 0x00,0x00,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x00,0x00,0x00,0x3F,0xC0,0xC0,0x3F,0x3F,0xC0,0xC0,0x3F,0x00,0x3F,0xFF,0xC0,0xC0,0x3F,0x3F,0xC0,0xC0,0xFF,0x3F,0x3F,0xFF,0xFF,0xFF,0x3F,0x3F,0xFF,0xFF,0xFF,0x3F,0x3F,0x3F,0xFF,0x3F,0x3F,0x3F,0x3F,0xFF,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x00,0x3F,0x3F,0x3F,0x3F,0x00,0x3F,0x3F,0x00,0x3F,0x00,0x00,0x3F,0x3F,0x00,0x00,0x3F,0x00
	ghost_up2: .byte 0x00,0x00,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x00,0x00,0x00,0x3F,0xC0,0xC0,0x3F,0x3F,0xC0,0xC0,0x3F,0x00,0x3F,0xFF,0xC0,0xC0,0x3F,0x3F,0xC0,0xC0,0xFF,0x3F,0x3F,0xFF,0xFF,0xFF,0x3F,0x3F,0xFF,0xFF,0xFF,0x3F,0x3F,0x3F,0xFF,0x3F,0x3F,0x3F,0x3F,0xFF,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x00,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x00,0x3F,0x3F,0x00,0x00,0x3F,0x00,0x00,0x3F,0x00,0x00,0x3F
	ghost_right1: .byte 0x00,0x00,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x00,0x00,0x00,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x00,0x3F,0x3F,0xFF,0xFF,0x3F,0x3F,0x3F,0xFF,0xFF,0x3F,0x3F,0xFF,0xC0,0xC0,0x3F,0x3F,0xFF,0xC0,0xC0,0x3F,0x3F,0xFF,0xC0,0xC0,0x3F,0x3F,0xFF,0xC0,0xC0,0x3F,0x3F,0x3F,0xFF,0x3F,0x3F,0x3F,0x3F,0xFF,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x00,0x3F,0x3F,0x3F,0x3F,0x00,0x3F,0x3F,0x00,0x3F,0x00,0x00,0x3F,0x3F,0x00,0x00,0x3F,0x00
	ghost_right2: .byte 0x00,0x00,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x00,0x00,0x00,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x00,0x3F,0x3F,0xFF,0xFF,0x3F,0x3F,0x3F,0xFF,0xFF,0x3F,0x3F,0xFF,0xC0,0xC0,0x3F,0x3F,0xFF,0xC0,0xC0,0x3F,0x3F,0xFF,0xC0,0xC0,0x3F,0x3F,0xFF,0xC0,0xC0,0x3F,0x3F,0x3F,0xFF,0x3F,0x3F,0x3F,0x3F,0xFF,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x00,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x00,0x3F,0x3F,0x00,0x00,0x3F,0x00,0x00,0x3F,0x00,0x00,0x3F
	ghost_down1: .byte 0x00,0x00,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x00,0x00,0x00,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x00,0x3F,0x3F,0xFF,0x3F,0x3F,0x3F,0x3F,0xFF,0x3F,0x3F,0x3F,0xFF,0xFF,0xFF,0x3F,0x3F,0xFF,0xFF,0xFF,0x3F,0x3F,0xFF,0xC0,0xC0,0x3F,0x3F,0xC0,0xC0,0xFF,0x3F,0x3F,0x3F,0xC0,0xC0,0x3F,0x3F,0xC0,0xC0,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x00,0x3F,0x3F,0x3F,0x3F,0x00,0x3F,0x3F,0x00,0x3F,0x00,0x00,0x3F,0x3F,0x00,0x00,0x3F,0x00
	ghost_down2: .byte 0x00,0x00,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x00,0x00,0x00,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x00,0x3F,0x3F,0xFF,0x3F,0x3F,0x3F,0x3F,0xFF,0x3F,0x3F,0x3F,0xFF,0xFF,0xFF,0x3F,0x3F,0xFF,0xFF,0xFF,0x3F,0x3F,0xFF,0xC0,0xC0,0x3F,0x3F,0xC0,0xC0,0xFF,0x3F,0x3F,0x3F,0xC0,0xC0,0x3F,0x3F,0xC0,0xC0,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x00,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x00,0x3F,0x3F,0x00,0x00,0x3F,0x00,0x00,0x3F,0x00,0x00,0x3F
	ghost_left1: .byte 0x00,0x00,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x00,0x00,0x00,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x00,0x3F,0xFF,0xFF,0x3F,0x3F,0x3F,0xFF,0xFF,0x3F,0x3F,0x3F,0xC0,0xC0,0xFF,0x3F,0x3F,0xC0,0xC0,0xFF,0x3F,0x3F,0xC0,0xC0,0xFF,0x3F,0x3F,0xC0,0xC0,0xFF,0x3F,0x3F,0x3F,0xFF,0x3F,0x3F,0x3F,0x3F,0xFF,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x00,0x3F,0x3F,0x3F,0x3F,0x00,0x3F,0x3F,0x00,0x3F,0x00,0x00,0x3F,0x3F,0x00,0x00,0x3F,0x00
	ghost_left2: .byte 0x00,0x00,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x00,0x00,0x00,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x00,0x3F,0xFF,0xFF,0x3F,0x3F,0x3F,0xFF,0xFF,0x3F,0x3F,0x3F,0xC0,0xC0,0xFF,0x3F,0x3F,0xC0,0xC0,0xFF,0x3F,0x3F,0xC0,0xC0,0xFF,0x3F,0x3F,0xC0,0xC0,0xFF,0x3F,0x3F,0x3F,0xFF,0x3F,0x3F,0x3F,0x3F,0xFF,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x00,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x00,0x3F,0x3F,0x00,0x00,0x3F,0x00,0x00,0x3F,0x00,0x00,0x3F
	#
	ghost_azul: .byte 0x00,0x00,0xC0,0xC0,0xC0,0xC0,0xC0,0xC0,0x00,0x00,0x00,0xC0,0xC0,0xC0,0xC0,0xC0,0xC0,0xC0,0xC0,0x00,0xC0,0xC0,0xC0,0xFF,0xC0,0xC0,0xFF,0xC0,0xC0,0xC0,0xC0,0xC0,0xC0,0xC0,0xC0,0xC0,0xC0,0xC0,0xC0,0xC0,0xC0,0xC0,0xC0,0xC0,0xC0,0xC0,0xC0,0xC0,0xC0,0xC0,0xC0,0xC0,0xFF,0xFF,0xC0,0xC0,0xFF,0xFF,0xC0,0xC0,0xC0,0xFF,0xC0,0xC0,0xFF,0xFF,0xC0,0xC0,0xFF,0xC0,0xC0,0xC0,0xC0,0xC0,0xC0,0xC0,0xC0,0xC0,0xC0,0xC0,0xC0,0x00,0xC0,0xC0,0xC0,0xC0,0xC0,0xC0,0x00,0xC0,0xC0,0x00,0x00,0xC0,0x00,0x00,0xC0,0x00,0x00,0xC0
	ghost_branco: .byte 0x00,0x00,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0x00,0x00,0x00,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0x00,0xFF,0xFF,0xFF,0x07,0xFF,0xFF,0x07,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0x07,0x07,0xFF,0xFF,0x07,0x07,0xFF,0xFF,0xFF,0x07,0xFF,0xFF,0x07,0x07,0xFF,0xFF,0x07,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0x00,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0x00,0xFF,0xFF,0x00,0x00,0xFF,0x00,0x00,0xFF,0x00,0x00,0xFF
	#		   xMap,yMap,xPixel,yPixel,tipo_personagem(1-pac,2-fantasma), cor, tile_atual, 
	#                  tile_anterior, vidas_qtd, posicao_score, score, ultima_tecla, ultima_direcao(0-up,1-right,2,down,3-left),
	#                  tipo_desenho, indicador(abrindo fechando)	
	pac_amarelo: .word 2,22,20,220,1,0x3F,0xFF,0x99,3,30,0,0x64,1,0,1
	pac_verde: .word 22,22,220,220,1,0x18,0xFF,0x99,3,80,0,0x66,3,0,1
	#		      xMap,yMap,xPixel,yPixel,tipo_personagem(1-pac,2-fantasma), cor, tile_atual, tile_anterior, ultima_direcao
	fantasma_vermelho: .word 11,10,110,100,2,0x07,0,0,4
	fantasma_rosa: .word 12,10,120,100,2,0x87,0,0,4
	fantasma_azul: .word 13,10,130,100,2,0xF8,0,0,4
	fantasma_laranja: .word 12,8,120,80,2,0x27,0,0,5
	ERRO_PONTO: .asciiz "Ponto fora do limite\n"
	
			  # SI,SI,F#,D#,SI,F#,D#,DO,DO,G ,MI,DO,G ,MI,SI,SI,F#,D#,SI,F#,D#,RE,D#,MI,FA,G ,G#,LA,A#,SI
	NOTAS_MUSICA: .word 71,71,66,63,71,66,63,72,72,67,64,72,67,64,71,71,66,63,71,66,63,62,63,64,65,67,68,69,71,71
	DURACAO_NOTA: .word 100,100,100,100,100,100,100,150,150,150,150,150,150,150,50,50,50,50,50,50,50,50,50,50,50,50,50,50,50,50 
	SCORE: .asciiz "SCORE:"
.text

MAIN:  
	jal MAPA
	#jal TESTE_RETA
	#jal loop
	jal START
	# Close the file 
	j EXIT
	
EXIT:	li $v0, 10
	syscall
		
START:  
	addi $sp,$sp,-4
	sw $ra,0($sp)
	li $t0, 0xffff
	jal INIT_PONTUACOES
	jal init_pac_yellow
	jal init_pac_green
	jal init_ghost_red
	jal init_ghost_pink
	jal init_ghost_blue
	jal init_ghost_orange
	#jal MUSICA_INICIAL
	loop_ready_tecla:
		#mtc0 $0, $9				# Reinicia o campo em ms
		#jal stop
		lw $t1,0xFF100000	        	# Busca se há interrupção no teclado
		andi $t1, $t1, 0x0001			# Le bit de Controle Teclado
    		#addi $t0,$zero,-1               	# Decrementa o contado do clico
    		j check_key
    		#bnez $t0, loop_ready_tecla
		#beqz $a0, move_ghost           	# Se não a interrupção do teclado move só os fantasmas
                                    		# solos a los fantasmas
      		lw $ra,0($sp)
       	 	addi $sp,$sp,4
        	jr $ra
    	
	check_key:
    		bnez $t1, load_key			# Se houve interrupção do teclado
    		li $s7,-1				# Marca $s7 não clicado
    		li $s5,-1				# $s5 representa que não é uma tecla
    		j moves_check
	load_key:
		lw $s5, 0xFF100004			# Carrega a tecla pressionada
    		#
    		li $t1, 0x71                    	# Carrega a tecla 'q' para sair
    		beq $t1, $s5, EXIT
    		#
    		li $s7,0x3F    				# Marca $s7 clicado pac yellow
    		li $t1, 0x61				# Carrega a tecla 'a'
    		beq $t1, $s5, moves_check
    		li $t1, 0x64                		# Carrega a tecla 'd' para verificar se foi a pressionada
		beq $t1, $s5, moves_check
		li $t1, 0x77                		# Carrega a tecla 'w' para verificar se foi a pressionada
		beq $t1, $s5, moves_check
		li $t1, 0x73                		# Carrega a tecla 's' para verificar se foi a pressionada
		beq $t1, $s5, moves_check
		#
		li $s7,0x18				# Marca $s7 clicado pac green
		li $t1, 0x66				# Carrega a tecla 'f'
    		beq $t1, $s5, moves_check
    		li $t1, 0x68                		# Carrega a tecla 'h' 
		beq $t1, $s5, moves_check
		li $t1, 0x74                		# Carrega a tecla 't' 
		beq $t1, $s5, moves_check
		li $t1, 0x67                		# Carrega a tecla 'g' 
		beq $t1, $s5, moves_check
	
	moves_check:
		addi $sp,$sp,-4
		sw $s5,0($sp)				# Guarda valor de $s5
    		jal MOVE_PAC_YELLOW
    		lw $s5,0($sp)				
    		jal MOVE_PAC_GREEN
		#jal move_ghosts
    		addi $sp,$sp,4
    		#
    		jal RENDERIZA
    		j loop_ready_tecla
    		
#######################
# Move pac yellow
#######################	    	
MOVE_PAC_YELLOW:
	la $s4,pac_amarelo
	beq $s7,0x3F,continue_pac_yellow	# Se $s7 = yellow(0x3F), foi clicado alguma tecla do pac yellow
	lw $s5,44($s4)				# Se chegou aqui o pac yellow não foi clicado. Carrega a ultima tecla apertada
	continue_pac_yellow:				
		sw $s5,44($s4)				# atualiza o valor para ultima tecla apertada
		addi $sp,$sp,-4
		sw $ra,0($sp) 				
		beq $s5, 0x61, move_left		# tecla 'a' para verificar se foi a pressionada
    		#
    		li $t1, 0x64                		# Carrega a tecla 'd' para verificar se foi a pressionada
		beq $t1, $s5, move_right
		#
		li $t1, 0x77                		# Carrega a tecla 'w' para verificar se foi a pressionada
		beq $t1, $s5, move_top
		#
		li $t1, 0x73                		# Carrega a tecla 's' para verificar se foi a pressionada
		beq $t1, $s5, move_down	
		# 
		j return_move

#######################
# Move pac green
#######################	 
MOVE_PAC_GREEN:
	la $s4,pac_verde
	beq $s7,0x18,continue_pac_green		# Se $s7 = yellow(0x18), foi clicado alguma tecla do pac red
	lw $s5,44($s4)				# Se chegou aqui pac red não clicado. Carrega a ultima tecla apertada
	continue_pac_green:
		sw $s5,44($s4)				# atualiza o valor para ultima tecla apertada
		addi $sp,$sp,-4
		sw $ra,0($sp) 
		li $t1, 0x66				# Carrega a tecla 'f' para verificar se foi a pressionada
		beq $t1, $s5, move_left
    		#
    		li $t1, 0x68                		# Carrega a tecla 'h' para verificar se foi a pressionada
		beq $t1, $s5, move_right
		#
		li $t1, 0x74                		# Carrega a tecla 't' para verificar se foi a pressionada
		beq $t1, $s5, move_top
		#
		li $t1, 0x67                		# Carrega a tecla 'g' para verificar se foi a pressionada
		beq $t1, $s5, move_down	
		# 
		j return_move

RENDERIZA:
	addi $sp,$sp,-4
	sw $ra,0($sp)
	la $a0,pac_amarelo		# Carrega desenho
	jal RENDERIZA_PAC
	la $a0,pac_verde
	jal RENDERIZA_PAC
	lw $ra,0($sp)
	addi $sp,$sp,4
	jr $ra

# $a0 = endereco_pac
RENDERIZA_PAC:
	addi $sp,$sp,-4
	sw $ra,0($sp)
	move $s0,$a0
	lw $s1,20($s0)
	lw $s2,0($s0) 	# carrega x
	lw $s3,4($s0) 	# carrega y
	li $t0,10
	mult $s2,$t0		# x multiplica por 10 obtendo x pixel
	mflo $s2		# move resultado para $s2	
	mult $s3,$t0		# y multiplica por 10 obtendo y pixel
	mflo $s3		# move resultado para $s3
	lw $t0,48($s0)		# Carrega direção
	beq $t0,0,renderiza_cima_pac 		
	beq $t0,1,renderiza_direita_pac 	
	beq $t0,2,renderiza_baixo_pac 	
	beq $t0,3,renderiza_esquerda_pac
	j exit_renderiza_pac
 	renderiza_cima_pac:
 		move $a0,$s2		# x	
		move $a1,$s3		# y
		lw $a2,24($s0) 		# Tile atual	
		jal DESENHO_ESCOLHA
		move $a0,$s2		# x	
		addi $a1,$s3,10		# y+10
		lw $a2,28($s0) 		# Tile Anterior	
		jal DESENHO_ESCOLHA
		lw $a0,8($s0)		# xPixel
		lw $a1,12($s0)		# yPixel
		lw $a2,20($s0) 		# $a2 cor
		move $a3,$s0		# $a3 = 0 top_pac  	 	
		jal DESENHO_ESCOLHA
		j exit_renderiza_pac
	renderiza_direita_pac:
		move $a0,$s2		# x	
		move $a1,$s3		# y
		lw $a2,24($s0) 		# Tile atual	
		jal DESENHO_ESCOLHA
		addi $a0,$s2,-10	# x-10	
		move $a1,$s3		# y
		lw $a2,28($s0) 		# Tile Anterior	
		jal DESENHO_ESCOLHA
		lw $a0,8($s0)		# xPixel
		lw $a1,12($s0)		# yPixel
		lw $a2,20($s0) 		# $a2 cor
		move $a3,$s0		# $a3 =1 direita_pac  	 	
		jal DESENHO_ESCOLHA
		j exit_renderiza_pac
	renderiza_baixo_pac:
		move $a0,$s2		# x	
		move $a1,$s3		# y
		lw $a2,24($s0) 		# Tile atual	
		jal DESENHO_ESCOLHA
		move $a0,$s2		# x	
		addi $a1,$s3,-10	# y-10
		lw $a2,28($s0) 		# Tile Anterior	
		jal DESENHO_ESCOLHA
		lw $a0,8($s0)		# xPixel
		lw $a1,12($s0)		# yPixel
		lw $a2,20($s0) 		# $a2 cor
		move $a3,$s0		# $a3 down_pac  	 	
		jal DESENHO_ESCOLHA
		j exit_renderiza_pac
	renderiza_esquerda_pac:
		move $a0,$s2		# x	
		move $a1,$s3		# y
		lw $a2,24($s0) 		# Tile atual	
		jal DESENHO_ESCOLHA
		addi $a0,$s2,10		# x+10	
		move $a1,$s3		# y
		lw $a2,28($s0) 		# Tile Anterior	
		jal DESENHO_ESCOLHA
		lw $a0,8($s0)		# xPixel
		lw $a1,12($s0)		# yPixel
		lw $a2,20($s0) 		# $a2 cor
		move $a3,$s0		# $a3 esquerda_pac  	 	
		jal DESENHO_ESCOLHA
		j exit_renderiza_pac
	#
	exit_renderiza_pac:
		lw $ra,0($sp)
		addi $sp,$sp,4
		jr $ra	
	
INIT_PONTUACOES:
	addi $sp,$sp,-8
	sw $ra,0($sp)
	sw $s0,4($sp)
	# Início pontuação yellow
	li $a0,0				# Número a ser printado
	li $a2,30				# linha score yellow pac
	jal PRINT_SCORE
	li $s0,260				# x
	li $a0,260				# x
	li $a1,40				# y
	loop_init_p_yellow:	
		move $a0,$s0
		li $a1,40				# y
		li $a2,0x3F #red
		la $a3,pac_man_open_right
		jal PRINT_DESENHO_PERSONAGEM
		addi $s0,$s0,15
		bne $s0,305,loop_init_p_yellow
		# Início Red
		li $a0,0				# Número a ser printado
		li $a2,80				# linha score red pac
		jal PRINT_SCORE
		li $s0,260				# x
		li $a0,260				# x
		li $a1,90				# y
	loop_init_p_green:	
		move $a0,$s0
		li $a1,90				# y
		li $a2,0x18 #green
		la $a3,pac_man_open_right
		jal PRINT_DESENHO_PERSONAGEM
		addi $s0,$s0,15
		bne $s0,305,loop_init_p_green
		#
		lw $s0,4($sp)
		lw $ra,0($sp)
		addi $sp,$sp,8
		jr $ra	    


# $a0=numero a ser printado, $a2= linha(y)	
PRINT_SCORE:
	li $a1,260				# coluna
	li $a3,0x00FF				# cores de frente(FF) e fundo(00) do texto
	li $v0,101				# print int
	syscall
	jr $ra
	 
init_pac_yellow:
	addi $sp,$sp,-4
	sw $ra,0($sp)
	la $t0,pac_amarelo
	la $a3,pac_man_open_right
	j init_personagens

init_pac_green:
	addi $sp,$sp,-4
	sw $ra,0($sp)
	la $t0,pac_verde
	la $a3,pac_man_open_left
	j init_personagens
	
init_ghost_red:
	addi $sp,$sp,-4
	sw $ra,0($sp)
	la $a3,fantasma_vermelho
	lw $a0,8($a3)		# xPixel
	lw $a1,12($a3)		# yPixel
	lw $a2,20($a3) 		# $a2 cor	
	jal DESENHO_ESCOLHA
	lw $ra,0($sp)
	addi $sp,$sp,4
	jr $ra
	
init_ghost_pink:
	addi $sp,$sp,-4
	sw $ra,0($sp)
	la $a3,fantasma_rosa
	lw $a0,8($a3)		# xPixel
	lw $a1,12($a3)		# yPixel
	lw $a2,20($a3) 		# $a2 cor	
	jal DESENHO_ESCOLHA
	lw $ra,0($sp)
	addi $sp,$sp,4
	jr $ra
		
init_ghost_blue:
	addi $sp,$sp,-4
	sw $ra,0($sp)
	la $a3,fantasma_azul
	lw $a0,8($a3)		# xPixel
	lw $a1,12($a3)		# yPixel
	lw $a2,20($a3) 		# $a2 cor	
	jal DESENHO_ESCOLHA
	lw $ra,0($sp)
	addi $sp,$sp,4
	jr $ra
	
init_ghost_orange:
	addi $sp,$sp,-4
	sw $ra,0($sp)
	la $a3,fantasma_laranja
	lw $a0,8($a3)		# xPixel
	lw $a1,12($a3)		# yPixel
	lw $a2,20($a3) 		# $a2 cor	
	jal DESENHO_ESCOLHA
	lw $ra,0($sp)
	addi $sp,$sp,4
	jr $ra
	
init_personagens:
	lw $a0,8($t0)				# x inicial personagem
	lw $a1,12($t0)				# y inicial personagem	mul $a0,$a0,10
	lw $a2,20($t0)
	jal PRINT_DESENHO_PERSONAGEM		# $a3 carrega o desenho que será printado
	lw $ra,0($sp)
	addi $sp,$sp,4
	jr $ra

#######################
# branch right
#######################			    		    
move_right:
 	#move $a0,$s0
 	#move $a1,$s1
 	lw $s0,8($s4)				# carrega xPixel
 	lw $s1,12($s4)				# carrega yMap
 	li $t0,10
 	div $s0,$t0
 	mflo $s0
 	mfhi $t1				# resto x
 	div $s1,$t0
 	mflo $s1
 	mfhi $t2				# resto y
 	lw $t3,48($s4)
 	beq $t3,1,verifica_right 		# A direção do personagem é igual a direita(1)
 	bnez $t1,continua_direcao_anterior	# Se a direção é diferente e o restox != 0 (não pode mudar de direção)
 	bnez $t2,continua_direcao_anterior	# Se a direção é diferente e o restoy != 0 (não pode mudar de direção)
 	##			
	verifica_right:
 		addi $a0,$s0,1
 		move $a1,$s1
 		move $a3,$s4				# Guarda em $a3 o endereço do objeto(pac ou fantasma)
 		jal VERIFICA_POSSIBILIDADE
 		beqz $v0,verifica_direcao_right		# se $v0 = 0 não é possível
 		li $t0,1				# 1 a direção é right
		sw $t0,48($s4)				# atualiza direção
		##
 		sw $s0,0($s4)				# xMap
 		sw $s1,4($s4)				# yMap
 		#
 		move $a0,$s0				
 		move $a1,$s1
 		jal TILE_MAP
 		sw $v0,24($s4)
 		##
 		add $a0,$s0,-1
 		move $a1,$s1
 		jal TILE_MAP
 		sw $v0, 28($s4)
		##
	atualiza_right:
		lw $a0,8($s4)				# carrega posicao x pixel
 		addi $a0,$a0,1				
 		sw $a0,8($s4)				
 		lw $a1,12($s4)				# carrega posicao y pixel
 		lw $a2,20($s4)				# carrega cor_objeto
 		jal VERIFICA_POSSIBILIDADE_OBJETO
		j return_move
	verifica_direcao_right:	
		lw $t2,48($s4)				# A direção do personagem
 		beq $t2,1,return_move			# direcao = 1(right) ( Se a direção é 1 já tentamos ir por ela)
 		j continua_direcao_anterior

#######################
# branch left
#######################			
move_left:
 	lw $s0,8($s4)			# carrega xPixel
 	lw $s1,12($s4)			# carrega yMap
 	li $t0,10
 	div $s0,$t0
 	mflo $s0
 	mfhi $t1				# restox
 	div $s1,$t0
 	mflo $s1
 	mfhi $t2				# restoy
 	lw $t3,48($s4)
 	addi $s0,$s0,1 # arredonda pra cima	
 	beq $t3,3,verifica_left1 		# A direção do personagem é igual a esquerda(3)
 	bnez $t1,continua_direcao_anterior	# Se a direção é diferente e o restox != 0 (não pode mudar de direção)
 	bnez $t2,continua_direcao_anterior	# Se a direção é diferente e o restoy != 0 (não pode mudar de direção)
 	# se chegar aqui a direção ta mudando e o xMap e yMap é uma posição válida
 	addi $s0,$s0,-1 			# restos == 0 não precisa arredondar
 	j verifica_left
 	#
	verifica_left1: 	
 		bnez $t1,verifica_left	# Se é diferente igual e o restox != 0 (mantem arredondamento)
 		addi $s0,$s0,-1 			# restos == 0 não precisa arredondar
 	#
	verifica_left:
 		addi $a0,$s0,-1
 		move $a1,$s1
 		move $a3,$s4				# Guarda em $a3 o endereço do objeto(pac ou fantasma)
 		jal VERIFICA_POSSIBILIDADE
 		beqz $v0,verifica_direcao_left		# se $v0 = 0 não é possível
 		li $t0,3				# 3 a direção é left
		sw $t0,48($s4)				# atualiza direção
		# TILE ATUAL
 		sw $s0,0($s4)				# xMap
 		sw $s1,4($s4)				# yMap
 		# TILE_ANTERIOR
 		move $a0,$s0				
 		move $a1,$s1
 		jal TILE_MAP
 		sw $v0,24($s4)
 		##
 		add $a0,$s0,1
 		move $a1,$s1
 		jal TILE_MAP
 		sw $v0, 28($s4)
		##
	atualiza_left:
		lw $a0,8($s4)				# carrega posicao x pixel
 		addi $a0,$a0,-1				
 		sw $a0,8($s4)				
 		lw $a1,12($s4)				# carrega posicao y pixel
 		lw $a2,20($s4)				# carrega cor_objeto
 		jal VERIFICA_POSSIBILIDADE_OBJETO
		j return_move
	verifica_direcao_left:	
		lw $t2,48($s4)				# A direção do personagem
 		beq $t2,3,return_move			# direcao = 3(left) ( Se a direção é 3 já tentamos ir por ela)
 		j continua_direcao_anterior

#######################
# branch top
#######################	
move_top:
 	#move $a0,$s0
 	#move $a1,$s1
 	lw $s0,8($s4)	# xMap
 	lw $s1,12($s4)	# yPixel
 	li $t0,10
 	div $s1,$t0
 	mflo $s1
 	mfhi $t1				# restoy
 	div $s0,$t0
 	mflo $s0
 	mfhi $t2				# restox
	lw $t3,48($s4)
	addi $s1,$s1,1 # arredonda pra cima
 	beq $t3,0,verifica_top1 		# A direção do personagem é igual a top(0)
 	bnez $t1,continua_direcao_anterior	# Se a direção é diferente e o restox != 0 (não pode mudar de direção)
 	bnez $t2,continua_direcao_anterior	# Se a direção é diferente e o restoy != 0 (não pode mudar de direção)
 	# se chegar aqui a direção ta mudando e o xMap e yMap é uma posição válida
 	addi $s1,$s1,-1 			# restos == 0 não precisa arredondar
	j verifica_top
	#
	verifica_top1:
		bnez $t1,verifica_top			# Se a direção é diferente e o restoy != 0 (mantem arredondamento)
		addi $s1,$s1,-1				# restos == 0 não precisa arredondar
	#
	verifica_top:
 		addi $a1,$s1,-1
 		move $a0,$s0
 		move $a3,$s4				# Guarda em $a3 o endereço do objeto(pac ou fantasma)
 		jal VERIFICA_POSSIBILIDADE
 		beqz $v0,verifica_direcao_top		# se $v0 = 0 não é possível
 		li $t0,0				# 0 a direção é top
		sw $t0,48($s4)				# atualiza direção
		#
		sw $s0,0($s4)				# Guarda no xMap
 		sw $s1,4($s4)				# Guarda no yMap
 		# TILE ATUAL
 		move $a0,$s0				
 		move $a1,$s1
 		jal TILE_MAP
 		sw $v0,24($s4)
 		## TILE ANTERIOR
 		move $a0,$s0
 		addi $a1,$s1,1
 		jal TILE_MAP
 		sw $v0, 28($s4)
		##
	atualiza_top:
		lw $a1,12($s4)				# carrega posicao y pixel
 		addi $a1,$a1,-1				
 		sw $a1,12($s4)				
 		lw $a0,8($s4)				# carrega posicao x pixel
 		lw $a2,20($s4)				# carrega cor_objeto
 		jal VERIFICA_POSSIBILIDADE_OBJETO
		j return_move
	verifica_direcao_top:	
		lw $t2,48($s4)				# A direção do personagem
 		beq $t2,0,return_move			# direcao = 0(top) ( Se a direção é 0 já tentamos ir por ela)
 		j continua_direcao_anterior

#######################
# branch down
#######################			
move_down:
 	lw $s0,8($s4)			# xPixel
 	lw $s1,12($s4)			# yPixel
 	li $t0,10
 	div $s1,$t0
 	mflo $s1
 	mfhi $t1				# restoy
 	div $s0,$t0
 	mflo $s0				# resto x
 	mfhi $t2				# restou
	lw $t3,48($s4)
 	beq $t3,2,verifica_down 		# A direção do personagem é igual a down(2)
 	bnez $t1,continua_direcao_anterior	# Se a direção é diferente e o restoy != 0 (não pode mudar de direção)
 	bnez $t2,continua_direcao_anterior	# Se a direção é diferente e o restox != 0 (não pode mudar de direção)
 	##			
	verifica_down:
 		addi $a1,$s1,1
 		move $a0,$s0
 		move $a3,$s4				# Guarda em $a3 o endereço do objeto(pac ou fantasma)
 		jal VERIFICA_POSSIBILIDADE
 		beqz $v0,verifica_direcao_down		# se $v0 = 0 não é possível
 		li $t0,2				# 2 a direção é down
		sw $t0,48($s4)				# atualiza direção
		## Atualiza posição
 		sw $s0,0($s4)				# Guarda no xMap
 		sw $s1,4($s4)				# Guarda no yMap
 		# TILE ATUAL
 		move $a0,$s0				
 		move $a1,$s1
 		jal TILE_MAP
 		sw $v0,24($s4)
 		## TILE ANTERIOR
 		move $a0,$s0
 		addi $a1,$s1,-1
 		jal TILE_MAP
 		sw $v0,28($s4)
		##
	atualiza_down:
		lw $a1,12($s4)				# carrega posicao y pixel
 		addi $a1,$a1,1				
 		sw $a1,12($s4)				
 		lw $a0,8($s4)				# carrega posicao x pixel
 		lw $a2,20($s4)				# carrega cor_objeto
 		jal VERIFICA_POSSIBILIDADE_OBJETO
		j return_move
	verifica_direcao_down:	
		lw $t2,48($s4)				# A direção do personagem
 		beq $t2,2,return_move			# direcao = 2(down) ( Se a direção é 2 já tentamos ir por ela)
 		j continua_direcao_anterior

# Continua na direção anterior do pac
continua_direcao_anterior:
	lw $t0,48($s4)
	beq $t0,0,move_top 	# direção igual a 0(top)vai para move_top
	beq $t0,1,move_right 	# direção igual a 1(right)vai para move_right
	beq $t0,2,move_down 	# direção igual a 2(down)vai para move_down
	beq $t0,3,move_left 	# direção igual a 3(left)vai para move_left
	j return_move

return_move:
	lw $ra,0($sp)
	addi $sp,$sp,4
	jr $ra
		
# Move ghosts
move_ghosts:
	addi $sp,$sp,-4
	sw $ra,0($sp)
	jal move_ghost_red
	jal move_ghost_pink
	jal move_ghost_blue
	lw $ra,0($sp)
	addi $sp,$sp,4
	jr $ra

move_ghost_red:
	addi $sp,$sp,-4
	sw $ra,0($sp)
	la $s4,fantasma_vermelho
	lw $s0,0($s4)
	lw $s1,4($s4)
	#la $s3,ghost_red
	seq $t0,$s0,11
	beqz $t0,return_move			# se $t0 for zero $s0 já não é 11 e ele sai
	seq $t1,$s1,10
	beq $t0,$t1,move_ghost_init		# chegou aqui $t0 = 1 se $t1 = 1 o fantasma ta no ponto inicial
	j return_move	
	
move_ghost_pink:
	addi $sp,$sp,-4
	sw $ra,0($sp)
	la $s4,fantasma_rosa
	lw $s0,0($s4)
	lw $s1,4($s4)
	#la $s3,ghost_pink
	seq $t0,$s0,12
	beqz $t0,return_move			# se $t0 for zero $s0 já não é 12 e ele sai
	seq $t1,$s1,10
	beq $t0,$t1,move_ghost_init		# chegou aqui $t0 = 1 se $t1 = 1 o fantasma ta no ponto inicial
	j return_move
	
move_ghost_blue:
	addi $sp,$sp,-4
	sw $ra,0($sp)
	la $s4,fantasma_azul
	lw $s0,0($s4)
	lw $s1,4($s4)
	#la $s3,ghost_blue
	seq $t0,$s0,13
	beqz $t0,return_move			# se $t0 for zero $s0 já não é 13 e ele sai
	seq $t1,$s1,10
	beq $t0,$t1,move_ghost_init		# chegou aqui $t0 = 1 se $t1 = 1 o fantasma ta no ponto inicial
	j return_move

move_ghost_init:
	move $a0,$s0
 	move $a1,$s1
 	addi $t1,$s1,-2				
 	sw $s0,8($s4)				# Salva nova coordenada x
	sw $t1,12($s4)				# Salva nova coordenada y
	li $s6,0
loop_ghost_preto:
	move $a0,$s0
 	addi $a1,$s1,9
	li $a3,0x00 				# reset linha preta
	#jal PRINT_LINHA_HORIZONTAL	
	addi $s1,$s1,-1
	move $a0,$s0
	move $a1,$s1
	move $a3,$s3 				# $s3 contem o desenho respectivo 
	jal PRINT_DESENHO
	addi $s6,$s6,1
	bne $s6,10,loop_ghost_preto
	li $s6,0
loop_ghost_cinza:
	move $a0,$s0
	addi $a1,$s1,9
	li $a3,0xAD				# reset linha cinza
	#jal PRINT_LINHA_HORIZONTAL
	addi $s1,$s1,-1
	move $a0,$s0
	move $a1,$s1
	move $a3,$s3				# $s2 contem o desenho respectivo
	jal PRINT_DESENHO
	addi $s6,$s6,1
	bne $s6,10,loop_ghost_cinza
	j return_move

#######################
# VERIFICA POSSIBILIDADE
#######################	
#$a0 = x, $a1 = y, $a3 = endereco_objeto(pac,ghost)
VERIFICA_POSSIBILIDADE:
	addi $sp,$sp,-12
	sw $ra,8($sp)
	sw $s2,4($sp)
	sw $s3,0($sp)
	move $s3,$a3		# $s3 = endereco_objeto
	la $t0, map_vetor
	la $t2, Xmap
	# carrega endereco da proxima posicao (x e y antes de andar)
	mult $a1, $t2 				# $t1 = $a1(y) * 32 ; 
	mflo $t1
	add $t1, $t1, $a0 			# $t1 = $t1($a1(y) * 32) + $a0(x); 
	add $s2, $t0, $t1 			# $t0 = map_vetor + y * 32 + x
	lw $t4, 20($s3) 			# carrega $t4 cor do objeto(pac ou fantasma)
	beq $t4,0x3F,pac_possibilidade		# $t4 = 0x3F (pac_amarelo )vai para pac_possibilidade
	#	
	beq $t4,0x18,pac_possibilidade		# $t4 = 0x18 (pac_verde) vai para pac_possibilidade
	#
	beq $t4,0x07,fantasma_possibilidade	# $t4 = 0x07 (fantasma_vermelho) vai para fantasma_possibilidade
	li $v0,0				# Indica que que não é um pac ou um fantasma
	j return_verifica_possibilidade		# se chegar aqui, não é um pac ou um fantasma

	pac_possibilidade:
		lbu $t2,0($s2)				# carrega $t2 (tile) no byte que $t0 corresponde.
		beqz $t2,possivel_pac			# $t2 igual a 0x00(preto)
		#
		beq $t2,0xFF,possivel_pac_comida	# $t2 = 0xFF (comida) vai para possivel comida
		#
		beq $t2,0xFA,possivel_pac_comidona	# $t2= 0xFA (comidona) vai para possivel
		#
		li $v0,0				# que nao pode andar
		j return_verifica_possibilidade		# se chegar aqui, pode andar

	possivel_pac_comida:
		lw $a0,40($s3) 		# carrega scoree do pac
		addi $a0,$a0,10				# adiciona 10 na pontuação do pac
		sw $a0,40($s3)				# $a0 = pontuação
		lw $a2,36($s3)				# $a2 = posicao score
		jal PRINT_SCORE
		j possivel_pac
		
	possivel_pac_comidona:
		lw $a0,40($s3)
		addi $a0,$a0,50				# adiciona 50 na pontuação do pac
		sw $a0,40($s3)				# $a0 = pontuação
		lw $a2,36($s3)				# $a2 = posicao score
		jal PRINT_SCORE
		j possivel_pac
	
	possivel_pac:
		li $t4,0				# Carrega a cor preta que representa o tile preto
		sb $t4,0($s2)				# atualiza proxima posicao no map para preto
		# carrega endereco da posicao atual (x e y antes de andar)
		la $t0, map_vetor
		la $t2, Xmap
		mult $s1, $t2 				# $t1 = $a1(y) * 32 ; 
		mflo $t1
		add $t1, $t1, $s0 			# $t1 = $t1($a1(y) * 32) + $a0(x); 
		add $t1, $t0, $t1 			# $t1 = map_vetor + y * 32 + x
		# fim carrega endereco
		li $t4,0				# carrega cor preta
		sb $t4,0($t1)				# atualiza posicao atual do mapa para preta
		li $v0,1				# indica que é possível andar
		j return_verifica_possibilidade
				
	fantasma_possibilidade:
		j return_verifica_possibilidade

	return_verifica_possibilidade:
		lw $ra,8($sp)
		lw $s2,4($sp)
		lw $s3,0($sp)
		addi $sp,$sp,12
		jr $ra


#a0 = x, $a1=y, $a2 = cor_objeto
VERIFICA_POSSIBILIDADE_OBJETO:
	jr $ra

# $a0 = x, $a1 = y
TILE_MAP:
	la $t0, map_vetor
	la $t2, Xmap
	# carrega endereco da proxima posicao (x e y antes de andar)
	mult $a1, $t2 				# $t1 = $a1(y) * 32 ; 
	mflo $t1
	add $t1, $t1, $a0 			# $t1 = $t1($a1(y) * 32) + $a0(x); 
	add $t0, $t0, $t1 			# $t0 = map_vetor + y * 32 + x
	lbu $v0,0($t0)
	jr $ra	
			
MUSICA_INICIAL:
	li $s1,30
	la $s0,NOTAS_MUSICA
	la $s2,DURACAO_NOTA
	li $t0,0
	li $a2,0	# instrumento
	li $a3,75	# volume
	#
	loop_musica:	
		beq $t0,$s1, fim_musica
		lw $a0,0($s0)		# nota
		lw $a1,0($s2)		# duracao
		li $v0,31		# 33 da pausa a mais
		syscall
		move $a0,$a1		#pausa = duracao
		li $v0,32
		syscall
		addi $s0,$s0,4		# proxima nota
		addi $s2,$s2,4		# proxima duração
		addi $t0,$t0,1
		j loop_musica
	fim_musica:
		jr $ra
	
#######################
# Print MAPA
#######################		
MAPA:
	addi $sp,$sp,-4
	sw $ra,0($sp)
	la $s0,map_vetor
	li $s1,0
	li $s2,0
	la $s3,X
	la $s4,Y
	while_mapa:
		beq $s2,$s4,exit_map	
		beq $s1,$s3,reseta_x
		move $a0,$s1
		move $a1,$s2
		lbu $a2,0($s0)
		jal DESENHO_ESCOLHA
		addi $s0,$s0,1
		addi $s1,$s1,10
		j while_mapa
	reseta_x:
		li $s1,0
		addi $s2,$s2,10
		j while_mapa
	exit_map:
		lw $ra,0($sp)
		addi $sp,$sp,4
		jr $ra

#######################
# DESENHO ESCOLHA
#######################	
# $a0 = x , $a1 = y, a2 = desenho, $a3 = endereço(só tem endereço se for algum personagem)
DESENHO_ESCOLHA:
	addi $sp,$sp,-4
	sw $ra,0($sp)
	beq $a2,0xFF,desenho_comida
	beq $a2,0xFA,desenho_comidona
	beq $a2,0x3F,desenho_personagem # pac_amarelo
	beq $a2,0x18,desenho_personagem # pac_verde
	beq $a2,0x07,desenho_personagem # ghost vermelho
	beq $a2,0x87,desenho_personagem # ghost pink
	beq $a2,0xF8,desenho_personagem # ghost azul claro
	beq $a2,0x27,desenho_personagem # ghost laranja
	beq $a2,0xAD,porta_fantasma
	move $a3,$a2
	li $a2,-1					# indica que o procedimento print_desenho deverá printar da variavel e não da memoria
	jal PRINT_DESENHO
	j return_desenho_escolha
	#
    desenho_comida:
	li $a2,0					# indica que o procedimento print_desenho deverá printar da memoria	
	la $a3,tile_comida
	jal PRINT_DESENHO
	j return_desenho_escolha
	#
    desenho_comidona:
	li $a2,0					# indica que o procedimento print_desenho deverá printar da memoria
	la $a3,tile_comidona
	jal PRINT_DESENHO
	j return_desenho_escolha

    porta_fantasma:
	li $a2,0					# indica que o procedimento print_desenho deverá printar da memoria
	la $a3,tile_porta_fantasma
	jal PRINT_DESENHO
	j return_desenho_escolha
	#
	
    # $a3 = endereco, $a2 = cor	
    desenho_personagem:		
	lw $t1,16($a3) 				# $t0 tipo do personagem
	beq $t1,1,personagem_pac
	lw $t0, 32($a3)				# personagem ghost
	j switch_desenho_personagem
	personagem_pac:	
	lw $t0,48($a3)	
	switch_desenho_personagem:	
		beq $t0,0,desenho_pac_up		# 0 representa desenho pac cima
		beq $t0,1,desenho_pac_right		# 1 representa desenho pac direita
		beq $t0,2,desenho_pac_down		# 2 representa desenho pac baixo
		beq $t0,3,desenho_pac_left		# 3 representa desenho pac left
		beq $t0,4,desenho_ghost_up		# 4 representa desenho ghost up
		beq $t0,5,desenho_ghost_right		# 4 representa desenho ghost right
		beq $t0,6,desenho_ghost_down		# 4 representa desenho ghost down
		beq $t0,7,desenho_ghost_left		# 4 representa desenho ghost left
		j return_desenho_escolha
		####
		desenho_pac_up:
			lw $t1,52($a3)
			beq $t1,0,desenho_pac_up_aberta
			beq $t1,1,desenho_pac_up_abertona
			beq $t1,2,desenho_pac_up_close
			desenho_pac_up_aberta:
				li $t0,1
				add $t1,$t1,$t0
				sw $t1,52($a3)
				sw $t0,56($a3)
				la $a3,pac_man_open_top
				j print_personagem
			desenho_pac_up_abertona:
				lw $t2,56($a3)
				add $t1,$t1,$t2
				sw $t1,52($a3)
				la $a3,pac_man_open_big_top
				j print_personagem
			desenho_pac_up_close:
				li $t0,-1
				add $t1,$t1,$t0
				sw $t1,52($a3)
				sw $t0,56($a3)
				la $a3,pac_man_close_y
				j print_personagem	
		#########	
		desenho_pac_right:
			lw $t1,52($a3)
			beq $t1,0,desenho_pac_right_aberta
			beq $t1,1,desenho_pac_right_abertona
			beq $t1,2,desenho_pac_right_close
			desenho_pac_right_aberta:
				li $t0,1
				add $t1,$t1,$t0
				sw $t1,52($a3)
				sw $t0,56($a3)
				la $a3,pac_man_open_right
				j print_personagem
			desenho_pac_right_abertona:
				lw $t2,56($a3)
				add $t1,$t1,$t2
				sw $t1,52($a3)
				la $a3,pac_man_open_big_right
				j print_personagem
			desenho_pac_right_close:
				li $t0,-1
				add $t1,$t1,$t0
				sw $t1,52($a3)
				sw $t0,56($a3)
				la $a3,pac_man_close_x
				j print_personagem
		#################################################
		desenho_pac_down:
			lw $t1,52($a3)
			beq $t1,0,desenho_pac_down_aberta
			beq $t1,1,desenho_pac_down_abertona
			beq $t1,2,desenho_pac_down_close
			desenho_pac_down_aberta:
				li $t0,1
				add $t1,$t1,$t0
				sw $t1,52($a3)
				sw $t0,56($a3)
				la $a3,pac_man_open_down
				j print_personagem
			desenho_pac_down_abertona:
				lw $t2,56($a3)
				add $t1,$t1,$t2
				sw $t1,52($a3)
				la $a3,pac_man_open_big_down
				j print_personagem
			desenho_pac_down_close:
				li $t0,-1
				add $t1,$t1,$t0
				sw $t1,52($a3)
				sw $t0,56($a3)
				la $a3,pac_man_close_y
				j print_personagem
		#################################################
		desenho_pac_left:
			lw $t1,52($a3)
			beq $t1,0,desenho_pac_left_aberta
			beq $t1,1,desenho_pac_left_abertona
			beq $t1,2,desenho_pac_left_close
			desenho_pac_left_aberta:
				li $t0,1
				add $t1,$t1,$t0
				sw $t1,52($a3)
				sw $t0,56($a3)
				la $a3,pac_man_open_left
				j print_personagem
			desenho_pac_left_abertona:
				lw $t2,56($a3)
				add $t1,$t1,$t2
				sw $t1,52($a3)
				la $a3,pac_man_open_big_left
				j print_personagem
			desenho_pac_left_close:
				li $t0,-1
				add $t1,$t1,$t0
				sw $t1,52($a3)
				sw $t0,56($a3)
				la $a3,pac_man_close_x
				j print_personagem
		#################################################
		desenho_ghost_up:
			la $a3,ghost_up1
			j print_personagem
		#################################################
		desenho_ghost_right:
			la $a3,ghost_right1
			j print_personagem
		#################################################
		desenho_ghost_down:
			la $a3,ghost_down1
			j print_personagem
		#################################################
		desenho_ghost_left:
			la $a3,ghost_left1
			j print_personagem
	#
	print_personagem:
		jal PRINT_DESENHO_PERSONAGEM
		j return_desenho_escolha
	#
	return_desenho_escolha:	
		lw $ra,0($sp)
		addi $sp,$sp,4
		jr $ra


#######################
# PRINT DESENHO
#######################	
# $a0 = x, $a1 = y, $a3 = endereco_inicio_desenho, $a2 indicador se ler da memoria ou de constante	
PRINT_DESENHO:
	addi $sp,$sp,-32
	sw $ra,28($sp)
	sw $s0,24($sp)
	sw $s1,20($sp)
	sw $s2,16($sp)
	sw $s3,12($sp)
	sw $s4,8($sp)
	sw $s5,4($sp)
	sw $s6,0($sp)
		
	move $s0,$a3
	move $s1,$a0					# $s1 = x inicio
	move $s2,$a1 					# $s2 = y inicio
	addi $s3,$a0,10					# $s3 = x + 10 (x final)
	addi $s4,$a1,10					# $s4 = y + 10 (y final)
	move $s5,$s1
	move $s6,$a2					# $s6 = $a2 (indicador ler da memoria ou de constante)
	while_desenho:
		beq $s2,$s4,exit_desenho	
		beq $s1,$s3,reseta_x_desenho
		move $a0,$s1
		move $a1,$s2
		bne $s6,-1,ler_memoria_desenho			# se não é -1 e devemos ler da memoria
		move $a2,$s0					# $a2 = $s0	
		j ponto_desenho					
	ler_memoria_desenho:	
		lbu $a2,0($s0)
		addi $s0,$s0,1
	ponto_desenho:
		jal PONTO
		addi $s1,$s1,1
		j while_desenho
	reseta_x_desenho:
		move $s1,$s5 					# restaura x 
		addi $s2,$s2,1
		j while_desenho
	exit_desenho:
		lw $ra,28($sp)
		lw $s0,24($sp)
		lw $s1,20($sp)
		lw $s2,16($sp)
		lw $s3,12($sp)
		lw $s4,8($sp)
		lw $s5,4($sp)
		lw $s6,0($sp)
		addi $sp,$sp,32
		jr $ra

#######################
# PRINT DESENHO PERSONAGEM (troca a cor genérica 0x3F, pela cor indicada)
#######################	
# $a0 = x, $a1 = y, $a3 = endereco_inicio_desenho, $a2=cor que será modificada	
PRINT_DESENHO_PERSONAGEM:
	addi $sp,$sp,-32
	sw $ra,28($sp)
	sw $s0,24($sp)
	sw $s1,20($sp)
	sw $s2,16($sp)
	sw $s3,12($sp)
	sw $s4,8($sp)
	sw $s5,4($sp)
	sw $s6,0($sp)
		
	move $s0,$a3
	move $s1,$a0					# $s1 = x inicio
	move $s2,$a1 					# $s2 = y inicio
	addi $s3,$a0,10					# $s3 = x + 10 (x final)
	addi $s4,$a1,10					# $s4 = y + 10 (y final)
	move $s5,$s1
	move $s6,$a2					# $s6 = $a2 cor a ser modificada
	while_desenho_personagem:
		beq $s2,$s4,exit_desenho_personagem	
		beq $s1,$s3,reseta_x_desenho_personagem
		move $a0,$s1
		move $a1,$s2
		lbu $a2,0($s0)
		bne $a2,0x3F,ponto_desenho_personagem		# Se não for igual
		move $a2,$s6					# $a2 recebe $a6(cor_a_ser_trocada)
	ponto_desenho_personagem:
		addi $s0,$s0,1
		jal PONTO
		addi $s1,$s1,1
		j while_desenho_personagem
	reseta_x_desenho_personagem:
		move $s1,$s5 					# restaura x 
		addi $s2,$s2,1
		j while_desenho_personagem
	exit_desenho_personagem:
		lw $ra,28($sp)
		lw $s0,24($sp)
		lw $s1,20($sp)
		lw $s2,16($sp)
		lw $s3,12($sp)
		lw $s4,8($sp)
		lw $s5,4($sp)
		lw $s6,0($sp)
		addi $sp,$sp,32
		jr $ra

#######################
# PRINTA UM PIXEL (troca a cor genérica 0x3F, pela cor indicada)
#######################									
#$a0 = x, $a1 =y , $a2 = cor	
PONTO: 	
	addi $sp,$sp,-4
	sw $ra,0($sp)
	jal ENDERECO_PONTO
	move $t0,$v0
	sb $a2, 0($t0) 				# salva $a2 (cor) no byte que $t0 corresponde.
	lw $ra,0($sp)
	addi $sp,$sp,4
	jr $ra
	
#$a0 = x, $a1 =y 	
ENDERECO_PONTO:
	la $t0, VGA_BASE
	la $t2, X
	la $t3, Y
	slt $t4,$a0,$t2 			# a0 < $t2(X)
	beqz $t4,ponto_fora_limite
	slt $t4,$a1,$t3 			# a1 < $t3(Y)
	beqz $t4,ponto_fora_limite
	mul $t1, $a1, $t2 			# $t1 = $a1(y) * 320; 
	add $t1, $t1, $a0 			# $t1 = $t1($a1(y) * 320) + $a0(x); 
	add $t0, $t0, $t1 			# $t0 = 0xFF000000 + y * 320 + x
	move $v0,$t0
	jr $ra
	ponto_fora_limite:
		addi $v0,$zero,4 			# x ou y estão fora do limite
		la $a0, ERRO_PONTO
		syscall
		j EXIT
